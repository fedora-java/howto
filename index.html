<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.20">
<title>Java Packaging HOWTO</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/*! Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment the following line when using as a custom stylesheet */
/* @import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"; */
html{font-family:sans-serif;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
b,strong{font-weight:bold}
abbr{font-size:.9em}
abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}
dfn{font-style:italic}
hr{height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type=checkbox],input[type=radio]{padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,::before,::after{box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.square{list-style-type:square}
ul.circle ul:not([class]),ul.disc ul:not([class]),ul.square ul:not([class]){list-style:inherit}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:1px solid #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 .1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin:0 auto;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:flex;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:hsla(0,0%,100%,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details{margin-left:1.25rem}
details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;outline:none;-webkit-tap-highlight-color:transparent}
details>summary::-webkit-details-marker{display:none}
details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}
details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}
details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border:1px solid #e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;border-radius:4px}
.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:first-child,.sidebarblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child,.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos,pre.pygments .linenos{border-right:1px solid;opacity:.35;padding-right:.5em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
pre.pygments span.linenos{display:inline-block;margin-right:.75em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans-serif;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all>*>tr,table.stripes-odd>*>tr:nth-of-type(odd),table.stripes-even>*>tr:nth-of-type(even),table.stripes-hover>*>tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
li>p:empty:only-child::before{content:"";display:inline-block}
ul.checklist>li>p:first-child{margin-left:-1em}
ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist>li>p:first-child>input[type=checkbox]:first-child{margin-right:.25em}
ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt,summary{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,td.hdlist1,span.alt,summary{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]{border-bottom:1px dotted}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media amzn-kf8,print{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<style>
pre.rouge table td { padding: 5px; }
pre.rouge table pre { margin: 0; }
pre.rouge, pre.rouge .w {
  color: #24292f;
  background-color: #f6f8fa;
}
pre.rouge .k, pre.rouge .kd, pre.rouge .kn, pre.rouge .kp, pre.rouge .kr, pre.rouge .kt, pre.rouge .kv {
  color: #cf222e;
}
pre.rouge .gr {
  color: #f6f8fa;
}
pre.rouge .gd {
  color: #82071e;
  background-color: #ffebe9;
}
pre.rouge .nb {
  color: #953800;
}
pre.rouge .nc {
  color: #953800;
}
pre.rouge .no {
  color: #953800;
}
pre.rouge .nn {
  color: #953800;
}
pre.rouge .sr {
  color: #116329;
}
pre.rouge .na {
  color: #116329;
}
pre.rouge .nt {
  color: #116329;
}
pre.rouge .gi {
  color: #116329;
  background-color: #dafbe1;
}
pre.rouge .kc {
  color: #0550ae;
}
pre.rouge .l, pre.rouge .ld, pre.rouge .m, pre.rouge .mb, pre.rouge .mf, pre.rouge .mh, pre.rouge .mi, pre.rouge .il, pre.rouge .mo, pre.rouge .mx {
  color: #0550ae;
}
pre.rouge .sb {
  color: #0550ae;
}
pre.rouge .bp {
  color: #0550ae;
}
pre.rouge .ne {
  color: #0550ae;
}
pre.rouge .nl {
  color: #0550ae;
}
pre.rouge .py {
  color: #0550ae;
}
pre.rouge .nv, pre.rouge .vc, pre.rouge .vg, pre.rouge .vi, pre.rouge .vm {
  color: #0550ae;
}
pre.rouge .o, pre.rouge .ow {
  color: #0550ae;
}
pre.rouge .gh {
  color: #0550ae;
  font-weight: bold;
}
pre.rouge .gu {
  color: #0550ae;
  font-weight: bold;
}
pre.rouge .s, pre.rouge .sa, pre.rouge .sc, pre.rouge .dl, pre.rouge .sd, pre.rouge .s2, pre.rouge .se, pre.rouge .sh, pre.rouge .sx, pre.rouge .s1, pre.rouge .ss {
  color: #0a3069;
}
pre.rouge .nd {
  color: #8250df;
}
pre.rouge .nf, pre.rouge .fm {
  color: #8250df;
}
pre.rouge .err {
  color: #f6f8fa;
  background-color: #82071e;
}
pre.rouge .c, pre.rouge .ch, pre.rouge .cd, pre.rouge .cm, pre.rouge .cp, pre.rouge .cpf, pre.rouge .c1, pre.rouge .cs {
  color: #6e7781;
}
pre.rouge .gl {
  color: #6e7781;
}
pre.rouge .gt {
  color: #6e7781;
}
pre.rouge .ni {
  color: #24292f;
}
pre.rouge .si {
  color: #24292f;
}
pre.rouge .ge {
  color: #24292f;
  font-style: italic;
}
pre.rouge .gs {
  color: #24292f;
  font-weight: bold;
}
</style>
</head>
<body class="book toc2 toc-left text-justify">
<div id="header">
<h1>Java Packaging HOWTO</h1>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_authors_and_contributing">Authors and contributing</a></li>
<li><a href="#_abstract">Abstract</a></li>
<li><a href="#_introduction">1. Introduction</a>
<ul class="sectlevel2">
<li><a href="#_basic_introduction_to_packaging_reasons_problems_rationale">1.1. Basic introduction to packaging, reasons, problems, rationale</a></li>
<li><a href="#_for_packagers">1.2. For Packagers</a>
<ul class="sectlevel3">
<li><a href="#_example_java_project">1.2.1. Example Java Project</a></li>
<li><a href="#_build_system_identification">1.2.2. Build System Identification</a></li>
<li><a href="#_quiz_for_packagers">1.2.3. Quiz for Packagers</a></li>
</ul>
</li>
<li><a href="#_for_java_developers">1.3. For Java Developers</a>
<ul class="sectlevel3">
<li><a href="#_example_rpm_project">1.3.1. Example RPM Project</a></li>
<li><a href="#_querying_repositories">1.3.2. Querying repositories</a></li>
<li><a href="#_quiz_for_java_developers">1.3.3. Quiz for Java Developers</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_java_specifics_in_fedora_for_users_and_developers">2. Java Specifics in Fedora for Users and Developers</a>
<ul class="sectlevel2">
<li><a href="#_java_implementation_in_fedora">2.1. Java implementation in Fedora</a>
<ul class="sectlevel3">
<li><a href="#_switching_between_different_java_implementations">2.1.1. Switching between different Java implementations</a></li>
</ul>
</li>
<li><a href="#_building_classpath_with_build_classpath">2.2. Building classpath with <code>build-classpath</code></a></li>
<li><a href="#_building_jar_repository_with_build_jar_repository">2.3. Building JAR repository with <code>build-jar-repository</code></a></li>
</ul>
</li>
<li><a href="#_java_specifics_in_fedora_for_packagers">3. Java Specifics in Fedora for Packagers</a>
<ul class="sectlevel2">
<li><a href="#_directory_layout">3.1. Directory Layout</a></li>
<li><a href="#_jar_file_identification">3.2. JAR File Identification</a>
<ul class="sectlevel3">
<li><a href="#_relative_paths">3.2.1. Relative paths</a></li>
<li><a href="#_artifact_specification">3.2.2. Artifact specification</a></li>
<li><a href="#_aliases">3.2.3. Aliases</a></li>
<li><a href="#_compatibility_versions">3.2.4. Compatibility versions</a></li>
</ul>
</li>
<li><a href="#_dependency_handling">3.3. Dependency Handling</a></li>
<li><a href="#_javadoc_packages">3.4. Javadoc packages</a></li>
<li><a href="#_core_java_packages">3.5. Core Java packages</a>
<ul class="sectlevel3">
<li><a href="#_jvm">3.5.1. JVM</a></li>
<li><a href="#_java_packages_tools">3.5.2. Java Packages Tools</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_packaging_best_practices">4. Packaging Best Practices</a></li>
<li><a href="#_generic_java_builds">5. Generic Java Builds</a>
<ul class="sectlevel2">
<li><a href="#_generating_application_shell_scripts">5.1. Generating Application Shell Scripts</a></li>
<li><a href="#_replacing_jars_with_symlinks_using_xmvn_subst">5.2. Replacing JARs with symlinks using <code>xmvn-subst</code></a></li>
</ul>
</li>
<li><a href="#_ant">6. Ant</a>
<ul class="sectlevel2">
<li><a href="#_apache_ivy">6.1. Apache Ivy</a></li>
</ul>
</li>
<li><a href="#_maven">7. Maven</a>
<ul class="sectlevel2">
<li><a href="#_packaging_maven_project">7.1. Packaging Maven project</a></li>
<li><a href="#_macros_for_maven_build_configuration">7.2. Macros for Maven build configuration</a>
<ul class="sectlevel3">
<li><a href="#_installing_additional_artifacts">7.2.1. Installing additional artifacts</a></li>
<li><a href="#_additional_mappings">7.2.2. Additional Mappings</a></li>
<li><a href="#_alternative_jar_file_names">7.2.3. Alternative JAR File Names</a></li>
<li><a href="#_single_artifact_per_package">7.2.4. Single Artifact Per Package</a></li>
<li><a href="#_assignment_of_the_maven_artifacts_to_the_subpackages">7.2.5. Assignment of the Maven Artifacts to the Subpackages</a></li>
<li><a href="#_modifying_xmvn_configuration_from_within_spec_file">7.2.6. Modifying XMvn configuration from within spec file</a></li>
</ul>
</li>
<li><a href="#_macros_for_pom_modification">7.3. Macros for POM modification</a>
<ul class="sectlevel3">
<li><a href="#_dependency_manipulation_macros">7.3.1. Dependency manipulation macros</a></li>
<li><a href="#_adding_removing_plugins">7.3.2. Adding / removing plugins</a></li>
<li><a href="#_disabling_unneeded_modules">7.3.3. Disabling unneeded modules</a></li>
<li><a href="#_working_with_parent_pom_references">7.3.4. Working with parent POM references</a></li>
<li><a href="#_macros_for_performing_generic_modifications">7.3.5. Macros for performing generic modifications</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_common_errors">8. Common Errors</a>
<ul class="sectlevel2">
<li><a href="#_missing_dependency">8.1. Missing dependency</a></li>
<li><a href="#_compilation_failure">8.2. Compilation failure</a></li>
<li><a href="#_requires_cannot_be_generated">8.3. Requires cannot be generated</a></li>
<li><a href="#_dependencies_with_scope_system">8.4. Dependencies with scope <code>system</code></a></li>
</ul>
</li>
<li><a href="#_migration_from_older_tools">9. Migration from older tools</a>
<ul class="sectlevel2">
<li><a href="#_add_maven_depmap_macro">9.1. <code>%add_maven_depmap</code> macro</a></li>
</ul>
</li>
<li><a href="#_manpages">Appendix A: Manpages</a>
<ul class="sectlevel2">
<li><a href="#_mvn_alias">A.1. mvn_alias</a></li>
<li><a href="#_mvn_artifact">A.2. mvn_artifact</a></li>
<li><a href="#_mvn_build">A.3. mvn_build</a></li>
<li><a href="#_mvn_compat_version">A.4. mvn_compat_version</a></li>
<li><a href="#_mvn_config">A.5. mvn_config</a></li>
<li><a href="#_mvn_file">A.6. mvn_file</a></li>
<li><a href="#_mvn_install">A.7. mvn_install</a></li>
<li><a href="#_mvn_package">A.8. mvn_package</a></li>
<li><a href="#_pom_add_dep">A.9. pom_add_dep</a></li>
<li><a href="#_pom_add_parent">A.10. pom_add_parent</a></li>
<li><a href="#_pom_add_plugin">A.11. pom_add_plugin</a></li>
<li><a href="#_pom_change_dep">A.12. pom_change_dep</a></li>
<li><a href="#_pom_disable_module">A.13. pom_disable_module</a></li>
<li><a href="#_pom_remove_dep">A.14. pom_remove_dep</a></li>
<li><a href="#_pom_remove_parent">A.15. pom_remove_parent</a></li>
<li><a href="#_pom_remove_plugin">A.16. pom_remove_plugin</a></li>
<li><a href="#_pom_set_parent">A.17. pom_set_parent</a></li>
<li><a href="#_pom_xpath_disable">A.18. pom_xpath_disable</a></li>
<li><a href="#_pom_xpath_inject">A.19. pom_xpath_inject</a></li>
<li><a href="#_pom_xpath_remove">A.20. pom_xpath_remove</a></li>
<li><a href="#_pom_xpath_replace">A.21. pom_xpath_replace</a></li>
<li><a href="#_pom_xpath_set">A.22. pom_xpath_set</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="_authors_and_contributing">Authors and contributing</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The authors of this document are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Mikolaj Izdebski, Red Hat</p>
</li>
<li>
<p>Nicolas Mailhot, JPackage Project</p>
</li>
<li>
<p>Stanislav Ochotnicky, Red Hat</p>
</li>
<li>
<p>Ville Skyttä, JPackage Project</p>
</li>
<li>
<p>Michal Srb, Red Hat</p>
</li>
<li>
<p>Michael Simacek, Red Hat</p>
</li>
<li>
<p>Marián Konček, Red Hat</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This document is free software; see the <a href="https://github.com/fedora-java/howto/blob/master/LICENSE">license</a> for terms of use, distribution and / or modification.</p>
</div>
<div class="paragraph">
<p>The source code for this document is available in <a href="https://github.com/fedora-java/howto">git repository</a>.
Instructions for building it from sources are available in <a href="https://github.com/fedora-java/howto/blob/master/README.md">README file</a>.</p>
</div>
<div class="paragraph">
<p>This document is developed as part of Javapackages community project, which welcomes new contributors.
Requests and comments related to this document should be <a href="https://bugzilla.redhat.com/enter_bug.cgi?product=fedora&amp;component=java-packaging-howto">reported at Red Hat Bugzilla</a>.</p>
</div>
<div class="paragraph">
<p>Before contributing please read the <a href="https://github.com/fedora-java/howto/blob/master/README.md">README file</a>, which among other things includes basic rules which should be followed when working on this document.
You can send patches to the <a href="https://bugzilla.redhat.com/">Red Hat Bugzilla</a>.
They should be in git format and should be prepared against <code>master</code> branch in git.
Alternatively you can also send pull requests at <a href="https://github.com/fedora-java/howto">Github repository</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_abstract">Abstract</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This document aims to help developers create and maintain Java packages in Fedora.
It <strong>does not</strong> supersede or replace <a href="https://docs.fedoraproject.org/en-US/packaging-guidelines/Java/">Java Packaging Guidelines</a>, but rather aims to document tools and techniques used for packaging Java software on Fedora.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_introduction">1. Introduction</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Clean Java packaging has historically been a daunting task.
Lack of any standard addressing the physical location of files on the system combined with the common use of licensing terms that only allow free redistribution of key components as a part of a greater ensemble has let to the systematic release of self-sufficient applications with built-in copies of external components.</p>
</div>
<div class="paragraph">
<p>As a consequence applications are only tested with the versions of the components they bundle, a complete Java system suffers from endless duplication of the same modules, and integrating multiple parts can be a nightmare since they are bound to depend on the same elements - only with different and subtly incompatible versions (different requirements, different bugs).
Any security or compatibility upgrade must be performed for each of those duplicated elements.</p>
</div>
<div class="paragraph">
<p>This problem is compounded by the current practice of folding extensions in the JVM itself after a while; an element that could safely be embedded in a application will suddenly conflict with a JVM part and cause subtle failures.</p>
</div>
<div class="paragraph">
<p>It is not surprising then that complex Java systems tend to fossilize very quickly, with the cost of maintaining dependencies current growing too high so fast people basically give up on it.</p>
</div>
<div class="paragraph">
<p>This situation is incompatible with typical fast-evolving Linux platform.
To attain the aim of user- and administrator-friendly RPM packaging of Java applications a custom infrastructure and strict packaging rules had to be evolved.</p>
</div>
<div class="sect2">
<h3 id="_basic_introduction_to_packaging_reasons_problems_rationale">1.1. Basic introduction to packaging, reasons, problems, rationale</h3>
<div class="paragraph">
<p>This section includes basic introduction to Java packaging world to people coming from different backgrounds.
The goal is to understand language of all groups involved.
If you are a Java developer coming into contact with RPM packaging for the first time start reading <a href="#_for_java_developers">Java developer</a> section.
On the other hand if you are coming from RPM packaging background an <a href="#_for_packagers">introduction to Java world</a> is probably a better starting point.</p>
</div>
<div class="paragraph">
<p>It should be noted that especially in this section we might sacrifice correctness for simplicity.</p>
</div>
</div>
<div class="sect2">
<h3 id="_for_packagers">1.2. For Packagers</h3>
<div class="paragraph">
<p>Java is a programming language which is usually compiled into bytecode for JVM (Java Virtual Machine).
For more details about the JVM and bytecode specification see <a href="http://docs.oracle.com/javase/specs/jvms/se8/html/index.html">JVM documentation</a>.</p>
</div>
<div class="sect3">
<h4 id="_example_java_project">1.2.1. Example Java Project</h4>
<div class="paragraph">
<p>To better illustrate various parts of Java packaging we will dissect simple Java <code>Hello world</code> application.
Java sources are usually organized using directory hierarchies.
Shared directory hierarchy creates a namespace called <code>package</code> in Java terminology.
To understand naming mechanisms of Java <code>packages</code> see <a href="http://docs.oracle.com/javase/tutorial/java/package/namingpkgs.html">Java package naming conventions</a>.</p>
</div>
<div class="paragraph">
<p>Let&#8217;s create a simple hello world application that will execute following steps
when run:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Ask for a name.</p>
</li>
<li>
<p>Print out <code>Hello World from</code> and the name from previous step.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>To illustrate certain points we artificially complicate things by creating:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>Input</code> class used only for input of text from terminal.</p>
</li>
<li>
<p><code>Output</code> class used only for output on terminal.</p>
</li>
<li>
<p><code>HelloWorldApp</code> class used as main application.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">Directory listing of example project</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="nv">$ </span>find <span class="nb">.</span>
<span class="nb">.</span>
./Makefile
./src
./src/org
./src/org/fedoraproject
./src/org/fedoraproject/helloworld
./src/org/fedoraproject/helloworld/output
./src/org/fedoraproject/helloworld/output/Output.java
./src/org/fedoraproject/helloworld/input
./src/org/fedoraproject/helloworld/input/Input.java
./src/org/fedoraproject/helloworld/HelloWorld.java</code></pre>
</div>
</div>
<div class="paragraph">
<p>In this project all packages are under <code>src/</code> directory hierarchy.</p>
</div>
<div class="listingblock">
<div class="title">HelloWorld.java listing</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kn">package</span> <span class="nn">org.fedoraproject.helloworld</span><span class="o">;</span>

<span class="c1">// import Input class from org.fedoraproject.helloworld.input package</span>
<span class="kn">import</span> <span class="nn">org.fedoraproject.helloworld.input.Input</span><span class="o">;</span>
<span class="c1">// import Output class from org.fedoraproject.helloworld.output package</span>
<span class="kn">import</span> <span class="nn">org.fedoraproject.helloworld.output.Output</span><span class="o">;</span>

<span class="kd">class</span> <span class="nc">HelloWorld</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">print</span><span class="o">(</span><span class="s">"What is your name?: "</span><span class="o">);</span>
        <span class="nc">String</span> <span class="n">reply</span> <span class="o">=</span> <span class="nc">Input</span><span class="o">.</span><span class="na">getInput</span><span class="o">();</span>
        <span class="nc">Output</span><span class="o">.</span><span class="na">output</span><span class="o">(</span><span class="n">reply</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Java packages</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="shell">org/fedoraproject/helloworld/input/Input.java
org/fedoraproject/helloworld/output/Output.java
org/fedoraproject/helloworld/HelloWorld.java</code></pre>
</div>
</div>
<div class="paragraph">
<p>Although the directory structure of our package is hierarchical, there is no real parent-child relationship between packages.
Each package is therefore seen as independent.
The above example makes use of three separate packages:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>org.fedoraproject.helloworld.input</code></p>
</li>
<li>
<p><code>org.fedoraproject.helloworld.output</code></p>
</li>
<li>
<p><code>org.fedoraproject.helloworld</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Environment setup consists of two main parts:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Telling JVM which Java class contains <code>main()</code> method.</p>
</li>
<li>
<p>Adding required JAR files on JVM classpath.</p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title">Compiling our project</div>
<p>The sample project can be compiled to a bytecode by Java compiler.
Java compiler can be typically invoked from command line by command <code>javac</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell">javac <span class="si">$(</span>find <span class="nt">-name</span> <span class="s1">'*.java'</span><span class="si">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>For every <code>.java</code> file corresponding <code>.class</code> file will be created.
The <code>.class</code> files contain Java bytecode which is meant to be executed on JVM.</p>
</div>
<div class="paragraph">
<p>One could put invocation of <code>javac</code> to Makefile and simplify the compilation a bit.
It might be sufficient for such a simple project, but it would quickly become hard to build more complex projects with this approach.
Java world knows several high-level build systems which can highly simplify building of Java projects.
Among others, probably the most known are <a href="https://maven.apache.org/">Apache Maven</a> and <a href="https://ant.apache.org/">Apache Ant</a>.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<img src="./images/icons/tip.png" alt="Tip">
</td>
<td class="content">
<div class="paragraph">
<p>See also <a href="#_maven">Maven</a> and <a href="#_ant">Ant</a> sections.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<div class="title">JAR files</div>
<p>Having our application split across many <code>.class</code> files would not be very practical, so those <code>.class</code> files are assembled into ZIP files with specific layout and called JAR files.
Most commonly these special ZIP files have <code>.jar</code> suffix, but other variations exist (<code>.war</code>, <code>.ear</code>).
They contain:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Compiled bytecode of our project.</p>
</li>
<li>
<p>Additional metadata stored in <code>META-INF/MANIFEST.MF</code> file.</p>
</li>
<li>
<p>Resource files such as images or localisation data.</p>
</li>
<li>
<p>Optionaly the source code of our project (called source JAR then).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>They can also contain additional bundled software which is something we do not want to have in packages.
You can inspect the contents of given JAR file by extracting it.
That can be done with following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell">jar <span class="nt">-xf</span> something.jar</code></pre>
</div>
</div>
<div class="paragraph">
<p>The detailed description of JAR file format is in the <a href="https://docs.oracle.com/javase/8/docs/technotes/guides/jar/jar.html">JAR File Specification</a>.</p>
</div>
<div class="paragraph">
<div class="title">Classpath</div>
<p>The classpath is a way of telling JVM where to look for user classes and 3rd party libraries.
By default, only current directory is searched, all other locations need to be specified explicitly by setting up <code>CLASSPATH</code> environment variable, or via <code>-cp</code> (<code>-classpath</code>) option of the Java Virtual Machine.</p>
</div>
<div class="listingblock">
<div class="title">Setting the classpath</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="shell">java <span class="nt">-cp</span> /usr/share/java/log4j.jar:/usr/share/java/junit.jar mypackage/MyClass.class
<span class="nv">CLASSPATH</span><span class="o">=</span>/usr/share/java/log4j.jar:/usr/share/java/junit.jar java mypackage/MyClass.class</code></pre>
</div>
</div>
<div class="paragraph">
<p>Please note that two JAR files are separated by colon in a classpath definition.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<img src="./images/icons/tip.png" alt="Tip">
</td>
<td class="content">
<div class="paragraph">
<p>See <a href="https://docs.oracle.com/javase/8/docs/technotes/tools/windows/classpath.html">official documentation</a> for more information about classpath.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<div class="title">Wrapper scripts</div>
<p>Classic compiled applications use dynamic linker to find dependencies (linked libraries), whereas dynamic languages such as Python, Ruby, Lua have predefined directories where they search for imported modules.
JVM itself has no embedded knowledge of installation paths and thus no automatic way to resolve dependencies of Java projects.
This means that all Java applications have to use wrapper shell scripts to setup the environment before invoking the JVM and running the application itself.
Note that this is not necessary for libraries.</p>
</div>
</div>
<div class="sect3">
<h4 id="_build_system_identification">1.2.2. Build System Identification</h4>
<div class="paragraph">
<p>The build system used by upstream can be usually identified by looking at their configuration files, which reside in project directory structure, usually in its root or in specialized directories with names such as <code>build</code> or <code>make</code>.</p>
</div>
<div class="paragraph">
<div class="title">Maven</div>
<p>Build managed by Apache Maven is configured by an XML file that is by default named <code>pom.xml</code>.
In its simpler form it usually looks like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="xml"><span class="nt">&lt;project</span> <span class="na">xmlns=</span><span class="s">"http://maven.apache.org/POM/4.0.0"</span>
<span class="na">xmlns:xsi=</span><span class="s">"http://www.w3.org/2001/XMLSchema-instance"</span>
<span class="na">xsi:schemaLocation=</span><span class="s">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;modelVersion&gt;</span>4.0.0<span class="nt">&lt;/modelVersion&gt;</span>
  <span class="nt">&lt;groupId&gt;</span>com.example.myproject<span class="nt">&lt;/groupId&gt;</span>
  <span class="nt">&lt;artifactId&gt;</span>myproject<span class="nt">&lt;/artifactId&gt;</span>
  <span class="nt">&lt;packaging&gt;</span>jar<span class="nt">&lt;/packaging&gt;</span>
  <span class="nt">&lt;version&gt;</span>1.0<span class="nt">&lt;/version&gt;</span>
  <span class="nt">&lt;name&gt;</span>myproject<span class="nt">&lt;/name&gt;</span>
  <span class="nt">&lt;dependencies&gt;</span>
    <span class="nt">&lt;dependency&gt;</span>
      <span class="nt">&lt;groupId&gt;</span>junit<span class="nt">&lt;/groupId&gt;</span>
      <span class="nt">&lt;artifactId&gt;</span>junit<span class="nt">&lt;/artifactId&gt;</span>
      <span class="nt">&lt;version&gt;</span>4.1<span class="nt">&lt;/version&gt;</span>
      <span class="nt">&lt;scope&gt;</span>test<span class="nt">&lt;/scope&gt;</span>
    <span class="nt">&lt;/dependency&gt;</span>
  <span class="nt">&lt;/dependencies&gt;</span>
<span class="nt">&lt;/project&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>It describes project&#8217;s build process in a declarative way, without explicitly specifying exact steps needed to compile sources and assemble pieces together.
It also specifies project&#8217;s dependencies which are usually the main point of interest for packagers.
Another important feature of Maven that packagers should know about are plugins.
Plugins extend Maven with some particular functionality, but unfortunately some of them may get in the way of packaging and need to be altered or removed.
There are RPM macros provided to facilitate modifying Maven dependencies and plugins.</p>
</div>
<div class="paragraph">
<div class="title">Ant</div>
<p>Apache Ant is also configured by an XML file. It is by convention named <code>build.xml</code> and in its simple form it looks like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="xml"><span class="nt">&lt;project</span> <span class="na">name=</span><span class="s">"MyProject"</span> <span class="na">default=</span><span class="s">"dist"</span> <span class="na">basedir=</span><span class="s">"."</span><span class="nt">&gt;</span>
  <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"src"</span> <span class="na">location=</span><span class="s">"src"</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"build"</span> <span class="na">location=</span><span class="s">"build"</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"dist"</span> <span class="na">location=</span><span class="s">"dist"</span><span class="nt">/&gt;</span>

  <span class="nt">&lt;target</span> <span class="na">name=</span><span class="s">"init"</span> <span class="na">description=</span><span class="s">"Create build directory"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;mkdir</span> <span class="na">dir=</span><span class="s">"${build}"</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;/target&gt;</span>

  <span class="nt">&lt;target</span> <span class="na">name=</span><span class="s">"compile"</span> <span class="na">depends=</span><span class="s">"init"</span>
        <span class="na">description=</span><span class="s">"Compile the source"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;javac</span> <span class="na">srcdir=</span><span class="s">"${src}"</span> <span class="na">destdir=</span><span class="s">"${build}"</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;/target&gt;</span>

  <span class="nt">&lt;target</span> <span class="na">name=</span><span class="s">"dist"</span> <span class="na">depends=</span><span class="s">"compile"</span>
        <span class="na">description=</span><span class="s">"Generate jar"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;mkdir</span> <span class="na">dir=</span><span class="s">"${dist}/lib"</span><span class="nt">/&gt;</span>

    <span class="nt">&lt;jar</span> <span class="na">jarfile=</span><span class="s">"${dist}/myproject.jar"</span> <span class="na">basedir=</span><span class="s">"${build}"</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;/target&gt;</span>

  <span class="nt">&lt;target</span> <span class="na">name=</span><span class="s">"clean"</span> <span class="na">description=</span><span class="s">"Clean build files"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;delete</span> <span class="na">dir=</span><span class="s">"${build}"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;delete</span> <span class="na">dir=</span><span class="s">"${dist}"</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;/target&gt;</span>
<span class="nt">&lt;/project&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Ant build file consists mostly of targets, which are collections of steps needed to accomplish intended task.
They usually depend on each other and are generally similar to Makefile targets.
Available targets can be listed by invoking <code>ant -p</code> in project directory containing <code>build.xml</code> file.
If the file is named differently than <code>build.xml</code> you have to tell Ant which file should be used by using <code>-f</code> option with the name of the actual build file.</p>
</div>
<div class="paragraph">
<p>Some projects that use Apache Ant also use Apache Ivy to simplify dependency handling.
Ivy is capable of resolving and downloading artifacts from Maven repositories which are declaratively described in XML.
Project usually contains one or more <code>ivy.xml</code> files specifying the module Maven coordinates and its dependencies.
Ivy can also be used directly from Ant build files.
To detect whether the project you wish to package is using Apache Ivy, look for files named <code>ivy.xml</code> or nodes in the <code>ivy</code> namespace in project&#8217;s build file.</p>
</div>
<div class="paragraph">
<div class="title">Make</div>
<p>While unlikely, it is still possible that you encounter a project whose build is managed by plain old Makefiles.
They contain a list of targets which consist of commands (marked with tab at the begining of line) and are invoked by <code>make</code> <em>target</em> or simply <code>make</code> to run the default target.</p>
</div>
</div>
<div class="sect3">
<h4 id="_quiz_for_packagers">1.2.3. Quiz for Packagers</h4>
<div class="paragraph">
<p>At this point you should have enough knowledge about Java to start packaging.
If you are not able to answer following questions return back to previous sections or ask experienced packagers for different explanations of given topics.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>What is the difference between JVM and Java?</p>
</li>
<li>
<p>What is a <code>CLASSPATH</code> environment variable and how can you use it?</p>
</li>
<li>
<p>Name two typical Java build systems and how you can identify which one is being used</p>
</li>
<li>
<p>What is the difference between <code>java</code> and <code>javac</code> comands?</p>
</li>
<li>
<p>What are contents of a typical <code>JAR</code> file?</p>
</li>
<li>
<p>What is a <code>pom.xml</code> file and what information it contains?</p>
</li>
<li>
<p>How would you handle packaging software that contains <code>lib/junit4.jar</code> inside source tarball?</p>
</li>
<li>
<p>Name at least three methods for bundling code in Java projects</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_for_java_developers">1.3. For Java Developers</h3>
<div class="paragraph">
<p>Packaging Java software has specifics which we will try to cover in this section aimed at Java developers who are already familiar with Java language, JVM, classpath handling, Maven, <code>pom.xml</code> file structure and dependencies.</p>
</div>
<div class="paragraph">
<p>Instead we will focus on basic packaging tools and relationships between Java and RPM world.
One of the most important questions is: What is the reason to package software in RPM (or other distribution-specific formats).
There are several reasons for it, among others:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Unified way of installation of software for users of distribution regardless of upstream projects</p>
</li>
<li>
<p>Verification of authenticity of software packages by signing them</p>
</li>
<li>
<p>Simplified software updates</p>
</li>
<li>
<p>Automatic handling of dependencies for users</p>
</li>
<li>
<p>Common filesystem layout across distribution enforced by packaging standards</p>
</li>
<li>
<p>Ability to administer, monitor and query packages installed on several machines through unified interfaces</p>
</li>
<li>
<p>Distribution of additional metadata with the software itself such as licenses used, homepage for the project, changelogs and other information that users or administrators can find useful</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="_example_rpm_project">1.3.1. Example RPM Project</h4>
<div class="paragraph">
<p>RPM uses <code>spec</code> files as recipes for building software packages.
We will use it to package example project created in previous section.
If you did not read it you do not need to; the file listing is available here and the rest is not necessary for this section.</p>
</div>
<div class="listingblock">
<div class="title">Directory listing</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="shell">Makefile
src
src/org
src/org/fedoraproject
src/org/fedoraproject/helloworld
src/org/fedoraproject/helloworld/output
src/org/fedoraproject/helloworld/output/Output.java
src/org/fedoraproject/helloworld/input
src/org/fedoraproject/helloworld/input/Input.java
src/org/fedoraproject/helloworld/HelloWorld.java</code></pre>
</div>
</div>
<div class="paragraph">
<p>We packed the project directory into file <code>helloworld.tar.gz</code>.</p>
</div>
<div id="helloworld_spec" class="listingblock">
<div class="title">Example spec file</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rpmspec"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
</pre></td><td class="code"><pre># Comments start with hash sign. Caution: macros in comments are still
# expanded, which can lead to unexpected results. To stop macro from expanding,
# double its percent sign (e.g. %%mvn_install)

# First part usually consists of metadata such as package name, version, and
# much more
Name:		helloworld
Version:	1.0
Release:	1%{?dist}
Summary:	This is a minimal spec file example

License:	GPLv2+
# Homepage URL of the project
URL:		http://www.fedoraproject.org

# Our source archive. %{name} expands to 'helloworld' so the resulting
# tarball name would be 'helloworld.tar.gz'.
Source0:    %{name}.tar.gz

# Packages that contain only architecture independent files, such as shell
# scripts or regular Java programs (not JNI libraries), should be marked as 'noarch'
BuildArch:  noarch

# Project's build time dependency. We don't really need JUnit, it just
# serves as and example
BuildRequires: junit

%description
Very short description since we have nothing to say.

%prep
# section for preparation of sources, applying patches
# or other things which can be done before running the build
# The macro setup is used to unpack sources
%setup -q

%build
# Section for compiling and generally assembling the final pieces.
# Our Makefile builds the project JAR file
%make_build

%install
# Installation into directory prepared by RPM expressed as %{buildroot}
install -p -m 644 helloworld.jar %{buildroot}%{_javadir}/helloworld.jar

# We use macro %jpackage_script to generate wrapper script for our JAR
# Will be explained in later sections
%jpackage_script org.fedoraproject.helloworld.HelloWorld "" "" %{name} helloworld true

# List of files that this package installs on the system
%files
%{_javadir}/helloworld.jar
%{_bindir}/helloworld

%changelog
* Tue Mar 19 2013 Stanislav Ochotnicky &lt;sochotnicky@redhat.com&gt; - 1.0-1
- This is first version
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>RPM <code>spec</code> files contain several basic sections:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Header, which contains: </dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>Package metadata such as its name, version, release, license, &#8230;&#8203;</p>
</li>
<li>
<p>A <code>Summary</code> with basic one-line summary of package contents.</p>
</li>
<li>
<p>Package source URLs denoted with <code>Source0</code> to <code>SourceN</code> directives.</p>
<div class="ulist">
<ul>
<li>
<p>Source files can then be referenced by <code>%SOURCE0</code> to <code>%SOURCEn</code>, which expand to actual paths to given files.</p>
</li>
<li>
<p>In practice, the source URL shouldn&#8217;t point to a file in our filesystem, but to an upstream release on the web.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Patches - using <code>Patch0</code> to <code>PatchN</code>.</p>
</li>
<li>
<p>Project dependencies.</p>
<div class="ulist">
<ul>
<li>
<p>Build dependencies specified by <code>BuildRequires</code>, which need to be determined manually.</p>
</li>
<li>
<p>Run time dependencies will be detected automatically. If it fails, you have to specify them with <code>Requires</code>.</p>
</li>
<li>
<p>More information on this topic can be found in the <a href="#_dependency_handling">dependency handling</a> section.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><code>%description</code></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>Few sentences about the project and its uses.
It will be displayed by package management software.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><code>%prep</code> section</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>Unpacks the sources using <code>setup -q</code> or manually if needed.</p>
</li>
<li>
<p>If a source file doesn&#8217;t need to be extracted, it can be copied to build directory by <code>cp -p %SOURCE0 .</code>.</p>
</li>
<li>
<p>Apply patches with <code>%patch X</code>, where <code>X</code> is the number of patch you want to apply.
(You usually need the patch index, so it would be: <code>%patch 0 -p1</code>).</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><code>%build</code> section</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>Contains project compilation instructions.
Usually consists of calling the projects build system such as Ant, Maven or Make.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">Optional <code>%check</code> section</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>Runs projects integration tests.
Unit test are usually run in <code>%build</code> section, so if there are no integration tests available, this section is omitted.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><code>%install</code> section</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>Copies built files that are supposed to be installed into <code>%{buildroot}</code> directory, which represents target filesystem&#8217;s root.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><code>%files</code> section</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>Lists all files, that should be installed from <code>%{buildroot}</code> to target system.</p>
</li>
<li>
<p>Documentation files are prefixed by <code>%doc</code> and are taken from build directory instead of buildroot.</p>
</li>
<li>
<p>Directories that this package should own are prefixed with <code>%dir</code>.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><code>%changelog</code></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>Contains changes to this spec file (not upstream).</p>
</li>
<li>
<p>Has prescribed format.
To prevent mistakes in format, it is advised to use tool such as <code>rpmdev-bumpspec</code> from package rpmdevtools to append new changelog entries instead of editing it by hand.</p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="paragraph">
<p>To build RPM from <a href="#helloworld_spec">this <code>spec</code> file</a> save it in your current directory and run <code>rpmbuild</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="nv">$ </span>rpmbuild <span class="nt">-bb</span> helloworld.spec</code></pre>
</div>
</div>
<div class="paragraph">
<p>If everything worked OK, this should produce RPM file <code>~/rpmbuild/RPMS/x86_64/helloworld-1.0-1.fc18.x86_64.rpm</code>.
You can use <code>rpm -i</code> or <code>dnf install</code> commands to install this package and it will add <code>/usr/share/java/helloworld.jar</code> and <code>/usr/bin/helloworld</code> wrapper script to your system.
Please note that this specfile is simplified and lacks some additional parts, such as license installation.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<img src="./images/icons/note.png" alt="Note">
</td>
<td class="content">
<div class="paragraph">
<p>Paths and filenames might be slightly different depending on your architecture and distribution.
Output of the commands will tell you exact paths.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>As you can see to build RPM files you can use <code>rpmbuild</code> command.
It has several other options, which we will cover later on.</p>
</div>
<div class="paragraph">
<p>Other than building binary RPMs (<code>-bb</code>), <code>rpmbuild</code> can also be used to:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>build only source RPMs (SRPMs), the packages containing source files which can be later build to RPMs (option <code>-bs</code>)</p>
</li>
<li>
<p>build all, both binary and source RPMs (option <code>-ba</code>)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>See <code>rpmbuild</code> 's manual page for all available options.</p>
</div>
</div>
<div class="sect3">
<h4 id="_querying_repositories">1.3.2. Querying repositories</h4>
<div class="paragraph">
<p>Fedora comes with several useful tools which can provide great assistance in getting information from RPM repositories.</p>
</div>
<div class="paragraph">
<p><code>dnf repoquery</code> is a tool for querying information from RPM repositories.
Maintainers of Java packages might typically query the repository for information like "which package contains the Maven artifact <code>groupId:artifactId</code>".</p>
</div>
<div class="listingblock">
<div class="title">Find out which package provides given artifact</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="nv">$ </span>dnf repoquery <span class="nt">--whatprovides</span> <span class="s1">'mvn(commons-io:commons-io)'</span>
apache-commons-io-1:2.4-9.fc19.noarch</code></pre>
</div>
</div>
<div class="paragraph">
<p>The example above shows that one can get to <code>commons-io:commons-io</code> artifact by installing <code>apache-commons-io</code> package.</p>
</div>
<div class="paragraph">
<p>By default, <code>dnf repoquery</code> uses all enabled repositories in DNF configuration, but it is possible to explicitly specify any other repository.
For example following command will query only Rawhide repository:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="nv">$ </span>dnf repoquery <span class="nt">--available</span> <span class="nt">--disablerepo</span> <span class="se">\*</span> <span class="nt">--enablerepo</span> rawhide <span class="nt">--whatprovides</span> <span class="s1">'mvn(commons-io:commons-io)'</span>
apache-commons-io-1:2.4-10.fc20.noarch</code></pre>
</div>
</div>
<div class="paragraph">
<p>Sometimes it may be useful to just list all the artifacts provided by given package:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="nv">$ </span>dnf repoquery <span class="nt">--provides</span> apache-commons-io
apache-commons-io <span class="o">=</span> 1:2.4-9.fc19
jakarta-commons-io <span class="o">=</span> 1:2.4-9.fc19
mvn<span class="o">(</span>commons-io:commons-io<span class="o">)</span> <span class="o">=</span> 2.4
mvn<span class="o">(</span>org.apache.commons:commons-io<span class="o">)</span> <span class="o">=</span> 2.4
osgi<span class="o">(</span>org.apache.commons.io<span class="o">)</span> <span class="o">=</span> 2.4.0</code></pre>
</div>
</div>
<div class="paragraph">
<p>Output above means that package <code>apache-commons-io</code> provides two Maven artifacts: previously mentioned <code>commons-io:commons-io</code> and <code>org.apache.commons:commons-io</code>.
In this case the second one is just an alias for same JAR file. See section about <a href="#_aliases">artifact aliases</a> for more information on this topic.</p>
</div>
<div class="paragraph">
<p>Another useful tool is <code>rpm</code>.
It can do a lot of stuff, but most importantly it can replace <code>dnf repoquery</code> if one only needs to query local RPM database.
Only installed packages, or local <code>.rpm</code> files, can be queried with this tool.</p>
</div>
<div class="paragraph">
<p>Common use case could be checking which Maven artifacts provide locally built packages.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="nv">$ </span>rpm <span class="nt">-qp</span> <span class="nt">--provides</span> simplemaven-1.0-2.fc21.noarch.rpm
mvn<span class="o">(</span>com.example:simplemaven<span class="o">)</span> <span class="o">=</span> 1.0
mvn<span class="o">(</span>simplemaven:simplemaven<span class="o">)</span> <span class="o">=</span> 1.0
simplemaven <span class="o">=</span> 1.0-2.fc21</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_quiz_for_java_developers">1.3.3. Quiz for Java Developers</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>How would you build a binary RPM if you were given a source RPM?</p>
</li>
<li>
<p>What is most common content of <code>Source0</code> <code>spec</code> file tag?</p>
</li>
<li>
<p>What is the difference between <code>Version</code> and <code>Release</code> tags?</p>
</li>
<li>
<p>How would you apply a patch in RPM?</p>
</li>
<li>
<p>Where on filesystem should JAR files go?</p>
</li>
<li>
<p>What is the format of RPM changelog or what tool would you use to produce it?</p>
</li>
<li>
<p>How would you install an application that needs certain layout (think <code>ANT_HOME</code>) while honoring distribution filesystem layout guidelines?</p>
</li>
<li>
<p>How would you generate script for running a application with main class <code>org.project.MainClass</code> which depends on <code>commons-lang</code> jar?</p>
</li>
</ol>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_java_specifics_in_fedora_for_users_and_developers">2. Java Specifics in Fedora for Users and Developers</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This section contains information about default Java implementation in Fedora, switching between different Java runtime environments and about few useful tools which can be used during packaging / development.</p>
</div>
<div class="sect2">
<h3 id="_java_implementation_in_fedora">2.1. Java implementation in Fedora</h3>
<div class="paragraph">
<p>Fedora ships with an open-source reference implementation of Java Standard Edition called <a href="https://openjdk.java.net/">OpenJDK</a>.
OpenJDK provides Java Runtime Environment for Java applications and set of development tools for Java developers.</p>
</div>
<div class="paragraph">
<p>From users point of view, <code>java</code> command is probably the most interesting.
It is a Java application launcher which spawns Java Virtual Machine (JVM), loads specified <code>.class</code> file and executes its main method.</p>
</div>
<div class="paragraph">
<p>Here is an example how to run sample Java project from section <a href="#_example_java_project">Example Java Project</a>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="nv">$ </span>java org/fedoraproject/helloworld/HelloWorld.class</code></pre>
</div>
</div>
<div class="paragraph">
<p>OpenJDK provides a lot of interesting tools for Java developers:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>javac</code> is a Java compiler which translates source files to Java bytecode, which can be later interpreted by JVM.</p>
</li>
<li>
<p><code>jdb</code> is a simple command-line debugger for Java applications.</p>
</li>
<li>
<p><code>javadoc</code> is a tool for generating Javadoc documentation.</p>
</li>
<li>
<p><code>javap</code> can be used for disassembling Java class files.</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="_switching_between_different_java_implementations">2.1.1. Switching between different Java implementations</h4>
<div class="paragraph">
<p>Users and developers may want to have multiple Java environments installed at the same time.
It is possible in Fedora, but only one of them can be default Java environment in system.
Fedora uses <code>alternatives</code> for switching between different installed JREs/JDKs.</p>
</div>
<div class="listingblock">
<div class="content">
<pre># alternatives --config java

There are 3 programs which provide 'java'.

  Selection    Command
  -----------------------------------------------
   1           java-17-openjdk.x86_64 (/usr/lib/jvm/java-17-openjdk-17.0.2.0.8-1.fc35.x86_64/bin/java)
*+ 2           java-11-openjdk.x86_64 (/usr/lib/jvm/java-11-openjdk-11.0.14.1.1-5.fc35.x86_64/bin/java)
   3           java-latest-openjdk.x86_64 (/usr/lib/jvm/java-18-openjdk-18.0.1.0.10-1.rolling.fc35.x86_64/bin/java)

Enter to keep the current selection[+], or type selection number:</pre>
</div>
</div>
<div class="paragraph">
<p>Example above shows how to chose default Java environment. <code>java</code> command will then point to the Java implementation provided by given JRE.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<img src="./images/icons/tip.png" alt="Tip">
</td>
<td class="content">
<div class="paragraph">
<p>See <code>man alternatives</code> for more information on how to use <code>alternatives</code>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Developers may want to use Java compiler from different JDK.
This can be achieved with <code>alternatives --config javac</code>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_building_classpath_with_build_classpath">2.2. Building classpath with <code>build-classpath</code></h3>
<div class="paragraph">
<p>Most of the Java application needs to specify classpath in order to work correctly.
Fedora contains several tools which make working with classpaths easier.</p>
</div>
<div class="paragraph">
<p><code>build-classpath</code> - this tool takes JAR filenames or artifact coordinates as arguments and translates them to classpath-like string.
See the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="nv">$ </span>build-classpath log4j junit org.ow2.asm:asm
/usr/share/java/log4j.jar:/usr/share/java/junit.jar:/usr/share/java/objectweb-asm4/asm.jar</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>log4j</code> corresponds to <code>log4j.jar</code> stored in <code>%{_javadir}</code>.
If the JAR file is stored in subdirectory under <code>%{_javadir}</code>, it is neccessary to pass <code>subdirectory/jarname</code> as an argument to <code>build-classpath</code>.
Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="nv">$ </span>build-classpath httpcomponents/httpclient.jar
/usr/share/java/httpcomponents/httpclient.jar</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_building_jar_repository_with_build_jar_repository">2.3. Building JAR repository with <code>build-jar-repository</code></h3>
<div class="paragraph">
<p>Another tool is <code>build-jar-repository</code>.
It can fill specified directory with symbolic / hard links to specified JAR files.
Similarly to <code>build-classpath</code>, JARs can be identified by their names or artifact coordintes.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="nv">$ </span>build-jar-repository my-repo log4j httpcomponents/httpclient junit:junit
<span class="nv">$ </span><span class="nb">ls</span> <span class="nt">-l</span> my-repo/
total 0
lrwxrwxrwx. 1 msrb msrb 45 Oct 29 10:39 <span class="o">[</span>httpcomponents][httpclient].jar -&gt; /usr/share/java/httpcomponents/httpclient.jar
lrwxrwxrwx. 1 msrb msrb 25 Oct 29 10:39 <span class="o">[</span>junit:junit].jar -&gt; /usr/share/java/junit.jar
lrwxrwxrwx. 1 msrb msrb 25 Oct 29 10:39 <span class="o">[</span>log4j].jar -&gt; /usr/share/java/log4j.jar</code></pre>
</div>
</div>
<div class="paragraph">
<p>Similar command <code>rebuild-jar-repository</code> can be used to rebuild JAR repository previously built by <code>build-jar-repository</code>.
See <code>man rebuild-jar-repository</code> for more information.</p>
</div>
<div class="paragraph">
<p><code>build-classpath-directory</code> is a small tool which can be used to build classpath string from specified directory.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="nv">$ </span>build-classpath-directory /usr/share/java/xstream
/usr/share/java/xstream/xstream-benchmark.jar:/usr/share/java/xstream/xstream.jar
:/usr/share/java/xstream/xstream-hibernate.jar</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_java_specifics_in_fedora_for_packagers">3. Java Specifics in Fedora for Packagers</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_directory_layout">3.1. Directory Layout</h3>
<div class="paragraph">
<p>This section describes most of directories used for Java packaging.
Each directory is named in RPM macro form, which shows how it should be used in RPM spec files.
Symbolic name is followed by usual macro expansion (i.e. physical directory location in the file system) and short description.</p>
</div>
<div class="dlist glossary">
<div class="title">Directories commonly used by regular packages</div>
<dl>
<dt><code>%{_javadir}</code>&#8201;&#8212;&#8201;<code>/usr/share/java</code></dt>
<dd>
<p>Directory that holds all JAR files that do not contain or use native code and do not depend on a particular Java standard version.
JAR files can either be placed directly in this directory or one of its subdirectories.
Often packages create their own subdirectories there, in this case subdirectory name should match package name.</p>
</dd>
<dt><code>%{_jnidir}</code>&#8201;&#8212;&#8201;<code>/usr/lib/java</code></dt>
<dd>
<p>Directory where architecture-specific JAR files are installed.
In particular, JAR files containing or using native code (Java Native Interface, JNI) should be installed there.</p>
</dd>
<dt><code>%{_javadocdir}</code>&#8201;&#8212;&#8201;<code>/usr/share/javadoc</code></dt>
<dd>
<p>Root directory where all Java API documentation (Javadoc) is installed.
Each source package usually creates a single subdirectory containing aggregated Javadocs for all binary packages it produces.</p>
</dd>
<dt><code>%{_mavenpomdir}</code>&#8201;&#8212;&#8201;<code>/usr/share/maven-poms</code></dt>
<dd>
<p>Directory where Project Object Model (POM) files used by Apache Maven are installed.
Each POM must have name that strictly corresponds to JAR file in <code>%{_javadir}</code> or <code>%{_jnidir}</code>.</p>
</dd>
<dt><code>%{_ivyxmldir}</code>&#8201;&#8212;&#8201;<code>/usr/share/ivy-xmls</code></dt>
<dd>
<p>Directory where <code>ivy.xml</code> files used by Apache Ivy are installed.
Each XML must have name that strictly corresponds to JAR file in <code>%{_javadir}</code> or <code>%{_jnidir}</code>.</p>
</dd>
</dl>
</div>
<div class="dlist glossary">
<div class="title">Other directories</div>
<dl>
<dt><code>%{_jvmdir}</code>&#8201;&#8212;&#8201;<code>/usr/lib/jvm</code></dt>
<dd>
<p>Root directory where different Java Virtual Machines (JVM) are installed.
Each JVM creates a subdirectory, possibly with several alternative names implemented with symbolic links.
Directories prefixed with <code>java</code> contain Java Development Kit (JDK), while directories which names start with <code>jre</code> hold Java Runtime Environment (JRE).</p>
</dd>
<dt><code>%{_jvmsysconfdir}</code>&#8201;&#8212;&#8201;<code>/etc/jvm</code></dt>
<dt><code>%{_jvmcommonsysconfdir}</code>&#8201;&#8212;&#8201;<code>/etc/jvm-common</code></dt>
<dd>
<p>Directories containing configuration files for Java Virtual Machines (JVM).</p>
</dd>
<dt><code>%{_jvmprivdir}</code>&#8201;&#8212;&#8201;<code>/usr/lib/jvm-private</code></dt>
<dt><code>%{_jvmlibdir}</code>&#8201;&#8212;&#8201;<code>/usr/lib/jvm</code></dt>
<dt><code>%{_jvmdatadir}</code>&#8201;&#8212;&#8201;<code>/usr/share/jvm</code></dt>
<dt><code>%{_jvmcommonlibdir}</code>&#8201;&#8212;&#8201;<code>/usr/lib/jvm-common</code></dt>
<dt><code>%{_jvmcommondatadir}</code>&#8201;&#8212;&#8201;<code>/usr/share/jvm-common</code></dt>
<dd>
<p>Directories containing implementation files of Java Virtual Machines (JVM).
Describing them in detail is out of scope for this document.
Purpose of each directory is commented briefly in <code>macros.jpackage</code> file in <code>/etc/rpm</code>.
More detailed description can be found in JPackage policy.</p>
</dd>
<dt><code>%{_javaconfdir}</code>&#8201;&#8212;&#8201;<code>/etc/java</code></dt>
<dd>
<p>Directory containing Java configuration files.
In particular it contains main Java configuration file&#8201;&#8212;&#8201;<code>java.conf</code>.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="_jar_file_identification">3.2. JAR File Identification</h3>
<div class="paragraph">
<p>Complex Java applications usually consist of multiple components.
Each component can have multiple implementations, called <em>artifacts</em>.
Artifacts in Java context are <em>usually</em> JAR files, but can also be WAR files or any other kind of file.</p>
</div>
<div class="paragraph">
<p>There are multiple incompatible ways of identifying (naming) Java artifacts and each build system often encourages usage of specific naming scheme.
This means that Linux distributions also need to allow each artifact to be located using several different identifiers, possible using different schemes.
On the other hand it is virtually impossible to every naming scheme, so there are some simplifications.</p>
</div>
<div class="paragraph">
<p>This chapter describes artifact different ways to identify and locate artifacts in system repository.</p>
</div>
<div class="sect3">
<h4 id="_relative_paths">3.2.1. Relative paths</h4>
<div class="paragraph">
<p>JAR artifacts are installed in one of standard directory trees.
Usually this is either <code>%{_javadir}</code> (<code>/usr/share/java</code>) or <code>%{_jnidir}</code> (<code>/usr/lib/java</code>).</p>
</div>
<div class="paragraph">
<p>The simplest way of identifying artifacts is using their relative path from one of standard locations.
All artifact can be identified this way because each artifacts has a unique file name.
Each path identifying artifact will be called <em>artifact path</em> in this document.</p>
</div>
<div class="paragraph">
<p>To keep artifact paths simpler and more readable, extension can be omitted if it is equal to <code>jar</code>.
For non-JAR artifacts extension cannot be omitted and must be retained.</p>
</div>
<div class="paragraph">
<p>Additionally, if artifact path points to a directory then it represents all artifacts contained in this directory.
This allows a whole set of related artifacts to be referenced easily by specifying directory name containing all of them.</p>
</div>
<div class="paragraph">
<p>If the same artifact path has valid expansions in two different root directories then it is unspecified which artifacts will be located.</p>
</div>
</div>
<div class="sect3">
<h4 id="_artifact_specification">3.2.2. Artifact specification</h4>
<div class="paragraph">
<p>As noted in previous section, every artifact can be uniquely identified by its file path.
However this is not always the preferred way of artifact identification.</p>
</div>
<div class="paragraph">
<p>Modern Java build systems provide a way of identifying artifacts with an abstract identifier, or more often, a pair of identifiers.
The first if usually called <strong>group ID</strong> or <strong>organization ID</strong> while the second is just <strong>artifact ID</strong>.
This pair of identifiers will be called <strong>artifact coordinates</strong> in this document.
Besides group ID and artifact ID, artifact coordinates may also include other optional information about artifact, such as <strong>extension</strong>, <strong>classifier</strong> and <strong>version</strong>.</p>
</div>
<div class="paragraph">
<p>In Linux distributions it is important to stay close to upstreams providing software being packaged, so the ability to identify artifacts in the same way as upstream does is very important from the packaging point of view.
Every artifact can optionally be identified by artifact coordinates assigned during package build.
Packages built with Maven automatically use this feature, but all other packages, even these built with pure <code>javac</code>, can use this feature too (see description of <a href="#_installing_additional_artifacts"><code>%mvn_artifact</code></a> and <a href="#_add_maven_depmap_macro"><code>%add_maven_depmap</code></a> macros).</p>
</div>
</div>
<div class="sect3">
<h4 id="_aliases">3.2.3. Aliases</h4>
<div class="paragraph">
<p>Aliases working in two ways:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Symlinks for paths</p>
</li>
<li>
<p>Additional mappings for artifact specifications</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In the real world the same project can appear under different names as it was evolving or released differently.
Therefore other projects may refer to those alternative names instead of using the name currently prefered by upstream.</p>
</div>
<div class="sect4">
<h5 id="_artifact_aliases">Artifact aliases</h5>
<div class="paragraph">
<p>XMvn provides a way to attach multiple artifact coordinates to a single artifact.
Dependent projects that use alternative coordinates can then be built without the need to patch their POMs or alter the build by other means.
It will also generate virtual provides for the alias, so it can be also used in <code>Requires</code> and <code>BuildRequires</code>.
Creating an alias is achieved by <code>%mvn_alias</code> macro.</p>
</div>
<div class="listingblock">
<div class="title">Example invocation</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="c"># com.example.foo:bar (the actual artifact existing in the project) will also</span>
<span class="c"># be available as com.example.foo:bar-all</span>
%mvn_alias com.example.foo:bar com.example.foo:bar-all

<span class="c"># You don't need to repeat the part of coordinates that stays the same</span>
<span class="c"># (groupID in this case)</span>
%mvn_alias com.example.foo:bar :bar-all

<span class="c"># You can specify multiple aliases at once</span>
%mvn_alias com.example.foo:bar :bar-all :bar-lib

<span class="c"># The macro supports several shortcuts to generate multiple alisaes.</span>
<span class="c"># Braces - {} - capture their content, which can then be referenced in the</span>
<span class="c"># alias part with @N, where N is the index of the capture group.</span>
<span class="c"># * acts as a wildcard (matching anything)</span>
<span class="c"># The following generates aliases ending with shaded for all artifacts in the</span>
<span class="c"># project</span>
%mvn_alias <span class="s1">'com.example.foo:{*}'</span> :@1-shaded</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_compatibility_versions">3.2.4. Compatibility versions</h4>
<div class="paragraph">
<p>Handling of compatibility packages, versioned jars etc.</p>
</div>
<div class="paragraph">
<p>In Fedora we prefer to always have only the latest version of a given project.
Unfortunately, this is not always possible as some projects change too much and it would be too hard to port dependent packages to the current version.
It is not possible to just update the package and keep the old version around as the names, file paths and dependency provides would clash.
The recommended practice is to update the current package to the new version and create new package representing the old version (called compat package).
The compat package needs to have the version number (usually only the major number, unless further distinction is necessary) appended to the name, thus effectivelly having different name from RPM&#8217;s point of view.
Such compat package needs to perform some additional steps to ensure that it can be installed and used along the non-compat one.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<img src="./images/icons/note.png" alt="Note">
</td>
<td class="content">
<div class="paragraph">
<p>You should always evaluate whether creating a compat package is really necessary.
Porting dependent projects to new versions of dependencies may be a complicated task, but your effort would be appreciated and it is likely that the patch will be accepted upstream at some point in time.
If the upstream is already inactive and the package is not required by anything, you should also consider retiring it.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect4">
<h5 id="_maven_compat_versions">Maven Compat Versions</h5>
<div class="paragraph">
<p>XMvn supports marking particular artifact as compat, performing the necessary steps to avoid clashes with the non-compat version.
An artifact can be marked as compat by <code>%mvn_compat_version</code>.
It accepts an artifact argument which will determine which artifact will be compat.
The format for specifying artifact coordinates is the same as with <a href="#_mvn_alias"><code>%mvn_alias</code></a>.
In the common case you will want to mark all artifacts as compat. You can specify multiple compat versions at a time.</p>
</div>
<div class="paragraph">
<div class="title">Dependency resolution of compat artifacts</div>
<p>When XMvn performs dependency resolution for a dependency artifact in
a project, it checks the dependency version and compares it against all
versions of the artifact installed in the buildroot. If none of the
compat artifacts matches it will resolve the artifact to the non-compat
one. This has a few implications:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The versions are compared for exact match.
The compat package should provide all applicable versions that are present in packages that are supposed to be used with this version.</p>
</li>
<li>
<p>The dependent packages need to have correct <code>BuildRequires</code> on the compat package as the virtual provides is also different (see below).</p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title">File names and virtual provides</div>
<p>In order to prevent file name clashes, compat artifacts have the first specified compat version appended to the filename.
Virtual provides for compat artifacts also contain the version as the last part of the coordinates.
There are multiple provides for each specified compat version.
Non-compat artifact do not have any version in the virtual provides.</p>
</div>
<div class="listingblock">
<div class="title">Example invocation of <code>%mvn_compat_version</code></div>
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="c"># Assuming the package has name bar and version 3</span>
<span class="c"># Sets the compat version of foo:bar artifact to 3</span>
%mvn_compat_version foo:bar 3
<span class="c"># The installed artifact file (assuming it's jar and there were no</span>
<span class="c"># %mvn_file calls) will be at %{_javadir}/bar/bar-3.jar</span>
<span class="c"># The generated provides for foo:bar will be</span>
<span class="c"># mvn(foo:bar:3) = 3</span>
<span class="c"># mvn(foo:bar:pom:3) = 3</span>

<span class="c"># Sets the compat versions of all artifacts in the build to 3 and 3.2</span>
%mvn_compat_version : 3 3.2</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_dependency_handling">3.3. Dependency Handling</h3>
<div class="paragraph">
<p>RPM has multiple types of metadata to describe dependency relationships between packages.
The two basic types are <code>Requires</code> and <code>Provides</code>.
<code>Requires</code> denote that a package needs something to be present at runtime to work correctly and the package manager is supposed to ensure that requires are met.
A single <code>Requires</code> item can specify a package or a virtual provide.
RPM <code>Provides</code> are a way to express that a package provides certain capability that other packages might need.
In case of Maven packages, the <code>Provides</code> are used to denote that a package contains certain Maven artifact.
They add more flexibility to the dependency management as single package can have any number of provides, and they can be moved across different packages without breaking other packages' requires.
<code>Provides</code> are usually generated by automatic tools based on the information from the built binaries or package source.</p>
</div>
<div class="paragraph">
<div class="title">Dependency handling for Maven packages</div>
<p>The Java packaging tooling on Fedora provides automatic <code>Requires</code> and <code>Provides</code> generation for packages built using XMvn.
The <code>Provides</code> are based on Maven artifact coordinates of artifacts that were installed by the currently being built.
They are generated for each subpackage separately.
They follow a general format <code>mvn(groupId:artifactId:extension:classifier:version)</code>, where the extension is omitted if its <code>jar</code> and classifier is omitted if empty.
<code>Version</code> is present only for compat artifacts, but the trailing colon has to be present unless it is a Jar artifact with no classifier.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="c"># Example provide for Jar artifact</span>
mvn<span class="o">(</span>org.eclipse.jetty:jetty-server<span class="o">)</span>
<span class="c"># Example provide for POM artifact</span>
mvn<span class="o">(</span>org.eclipse.jetty:jetty-parent:pom:<span class="o">)</span>
<span class="c"># Example provide for Jar artifact with classifier</span>
mvn<span class="o">(</span>org.sonatype.sisu:sisu-guice::no_aop:<span class="o">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The generated Requires are based on dependencies specified in Maven POMs in the project.
Only dependencies with <code>scope</code> set to either <code>compile</code>, <code>runtime</code> or not set at all are used for Requires generation.
Requires do not rely on package names and instead always use virtual provides that were described above, in exactly the same format, in order to be satisfiable by the already existing provides.
For packages consisting of multiple subpackages, <code>Requires</code> are generated separately for each subpackage.
Additionally, <code>Requires</code> that point to an artifact in a different subpackage of the same source package are generated with exact versions to prevent version mismatches between artifacts belonging to the same project.</p>
</div>
<div class="paragraph">
<p>The requires generator also always generates <code>Requires</code> on <code>java-headless</code> and <code>javapackages-tools</code>.</p>
</div>
<div class="paragraph">
<div class="title">Dependency handling for non-Maven packages that ship POM files</div>
<p>If the package is built built using different tool than Apache Maven, but still ships Maven POM(s), the you will still get automatic provides generation if you install the POM using <code>%mvn_artifact</code> and <code>%mvn_install</code>.
The requires generation will also be executed but the outcome largely depends on whether the POM contains accurate dependency insformation.
If it contains dependency information, you should double-check that it is correct and up-to-date.
Otherwise you need to add <code>Requires</code> tags manually as described in the next section.</p>
</div>
<div class="paragraph">
<div class="title">Dependency handling for non-Maven packages that don&#8217;t ship POM files</div>
<p>For packages without POMs it is necessary to specify <code>Requires</code> tags manually.
In order to build the package you needed to specify <code>BuildRequires</code> tags.
Your <code>Requires</code> tags will therefore likely be a subset of your <code>BuildRequires</code>, excluding build tools and test only dependencies.</p>
</div>
<div class="paragraph">
<div class="title">Querying Requires and Provides of built packages</div>
<p>The generated Requires and Provides of built packages can be queried using <code>rpm</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell">rpm <span class="nt">-qp</span> <span class="nt">--provides</span> path/to/example-1.0.noarch.rpm
rpm <span class="nt">-qp</span> <span class="nt">--requires</span> path/to/example-1.0.noarch.rpm</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<img src="./images/icons/tip.png" alt="Tip">
</td>
<td class="content">
<div class="paragraph">
<p>See also <a href="#_querying_repositories">Querying Fedora repositories</a></p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<div class="title">Generating BuildRequires</div>
<p>While <code>Requires</code> and <code>Provides</code> generation is automated for Maven projects, <code>BuildRequires</code> still remains a manual task.
However, there are tools to simplify it to some extent.
XMvn ships a script <code>xmvn-builddep</code> that takes a <code>build.log</code> output from mock and prints Maven-style <code>BuildRequires</code> on artifacts that were actually used during the build.
It does not help you to figure out what the <code>BuildRequires</code> are before you actually build it, but it may help you to have a minimal set of <code>BuildRequires</code> that are less likely to break, as they do not rely on transitive dependencies.</p>
</div>
</div>
<div class="sect2">
<h3 id="_javadoc_packages">3.4. Javadoc packages</h3>
<div class="paragraph">
<p>Javadoc subpackages in Fedora provide automatically generated API documentation for Java libraries and applications.
<a href="#_java_implementation_in_fedora">Java Development Kit</a> comes with tool called <code>javadoc</code>.
This tool can be used for generating the documentation from specially formated comments in Java source files.
Output of this tool, together with license files, usually represents only content of javadoc subpackages.
Note <code>javadoc</code> invocation is typically handled by build system and package maintainer does not need to deal with it directly.</p>
</div>
<div class="paragraph">
<p>Javadoc subpackage shouldn&#8217;t depend on its base package and vice versa.
The rationale behind this rule is that documentation can usually be used independently from application / library and therefore base package does not need to be always installed.
Users are given an option to install application and documentation separately.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<img src="./images/icons/tip.png" alt="Tip">
</td>
<td class="content">
<div class="paragraph">
<p>You can learn more about <code>javadoc</code> from <a href="https://www.oracle.com/technetwork/java/javase/documentation/index-137868.html">official documentation</a>.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_core_java_packages">3.5. Core Java packages</h3>
<div class="sect3">
<h4 id="_jvm">3.5.1. JVM</h4>
<div class="paragraph">
<p>Fedora allows multiple Java Virtual Machines (JVMs) to be packaged independently.
Java packages should not directly depend on any particulat JVM, but instead require one of three virtual JVM packages depending of what Java funtionality is required.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong><code>java-headless</code></strong></dt>
<dd>
<p>This package provides a working Java Runtime Environment (JRE) with some functionality disabled.
Graphics and audio support may be unavailable in this case.
<code>java-headless</code> provides functionality that is enough for most of packages and avoids pulling in a number of graphics and audio libraries as dependencies.
Requirement on <code>java-headless</code> is appropriate for most of Java packages.</p>
</dd>
<dt class="hdlist1"><strong><code>java</code></strong></dt>
<dd>
<p>Includes the same base functionality as <code>java-headless</code>, but also implements audio and graphics subsystems.
Packages should require <code>java</code> if they need some functionality from these subsystems, for example creating GUI using AWT library.</p>
</dd>
<dt class="hdlist1"><strong><code>java-devel</code></strong></dt>
<dd>
<p>Provides full Java Development Kit (JDK).
In most cases only packages related to Java development should have runtime dependencies on <code>java-devel</code>.
Runtime packages should require <code>java-headless</code> or <code>java</code>.
Some packages not strictly related to java development need access to libraries included with JDK, but not with JRE (for example <code>tools.jar</code>).
That is one of few cases where requiring <code>java-devel</code> may be necessary.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Packages that require minimal Java standard version can add versioned dependencies on one of virtual packages providing Java environment.
For example if packages depending on functionality of JDK 8 can require <code>java-headless &gt;= 1:1.8.0</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<img src="./images/icons/note.png" alt="Note">
</td>
<td class="content">
<div class="title">Epoch in versions of JVM packages</div>
<div class="paragraph">
<p>For compatibility with JPackage project packages providing Java 1.6.0 or later use epoch equal to <code>1</code>.
This was necessary because package <code>java-1.5.0-ibm</code> from JPackage project had epoch <code>1</code> for some reason.
Therefore packages providing other implementations of JVM also had to use non-zero epoch in order to keep version ordering correct.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_java_packages_tools">3.5.2. Java Packages Tools</h4>
<div class="paragraph">
<p>Java Packages Tools are packaged as several binary RPM packages:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong><code>maven-local</code></strong></dt>
<dd>
<p>This package provides a complete environment which is required to build Java packages using Apache Maven build system.
This includes a default system version of Java Development Kit (JDK), Maven, a number of Maven plugins commonly used to build packages, various macros and utlilty tools.
<code>maven-local</code> is usually declared as build dependency of Maven packages.</p>
</dd>
<dt class="hdlist1"><strong><code>ivy-local</code></strong></dt>
<dd>
<p>Analogously to <code>maven-local</code>, this package provides an environment required to build Java packages using Apache Ivy as dependency manager.</p>
</dd>
<dt class="hdlist1"><strong><code>javapackages-local</code></strong></dt>
<dd>
<p>Package providing a basic environment necessary to geterate and install metadata for system artifact repository.</p>
</dd>
<dt class="hdlist1"><strong><code>javapackages-tools</code></strong></dt>
<dd>
<p>Package owning basic Java directories and providing runtime support for Java packages.
The great majority of Java packages depend on <code>javapackages-tools</code>.</p>
</dd>
</dl>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_packaging_best_practices">4. Packaging Best Practices</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Packaging Java has certain specifics that will be covered in this section which will cover basic packaging principles:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>No bundling</p>
</li>
<li>
<p>Working with upstreams</p>
</li>
<li>
<p>Commenting workarounds</p>
</li>
<li>
<p>Single library version</p>
</li>
<li>
<p>Links to other appropriate documents</p>
</li>
<li>
<p>&#8230;&#8203;</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_generic_java_builds">5. Generic Java Builds</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This chapter talks about basic build steps in Java such as invoking <code>javac</code> and using spec macros like <code>build-claspath</code> and <code>build-jar-repository</code>.</p>
</div>
<div class="sect2">
<h3 id="_generating_application_shell_scripts">5.1. Generating Application Shell Scripts</h3>
<div class="paragraph">
<p>As mentioned in section about <a href="#_for_packagers">Java packaging basics</a>, all Java applications need wrapper shell scripts to setup the environment before running JVM and associated Java code.</p>
</div>
<div class="paragraph">
<p>The <code>javapackages-tools</code> package contains a convenience <code>%jpackage_script</code> macro that can be used to create scripts that work for the majority of packages.
See its definition and documentation in <code>/usr/lib/rpm/macros.d/macros.jpackage</code>.
One thing to pay attention to is the 6th argument to it - whether to prefer a JRE over a full SDK when looking up a JVM to invoke.
Most packages that do not require the full Java SDK will want to set that to <code>true</code> to avoid unexpected results when looking up a JVM when some of the installed JREs do not have the corresponding SDK (<code>*-devel</code> package) installed.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="spec">%install
...
%jpackage_script msv.textui.Driver "" "" msv-msv:msv-xsdlib:relaxngDatatype:isorelax msv true
...</code></pre>
</div>
</div>
<div class="paragraph">
<p>The previous example installs the <code>msv</code> script (5th argument) with main class being <code>msv.textui.Driver</code> (1st argument).
No optional flags (2nd argument) or options (3rd argument) are used.
This script will add several libraries to classpath before executing main class (4th argument, JAR files separated with <code>:</code>).
<code>build-classpath</code> is run on every part of 4th argument to create full classpaths.</p>
</div>
</div>
<div class="sect2">
<h3 id="_replacing_jars_with_symlinks_using_xmvn_subst">5.2. Replacing JARs with symlinks using <code>xmvn-subst</code></h3>
<div class="paragraph">
<p>Sometimes it may be needed to replace all JAR files in current directory with symlinks to the system JARs located in <code>%{_javadir}</code>.
This task can be achieved using tool called <code>xmvn-subst</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="nv">$ </span><span class="nb">ls</span> <span class="nt">-l</span>
<span class="nt">-rw-r--r--</span><span class="nb">.</span> 1 msrb msrb  40817 Oct 22 09:16 cli.jar
<span class="nt">-rw-r--r--</span><span class="nb">.</span> 1 msrb msrb 289983 Oct 22 09:17 junit4.jar
<span class="nt">-rw-r--r--</span><span class="nb">.</span> 1 msrb msrb 474276 Oct 22 09:14 log4j.jar
<span class="nv">$ </span>xmvn-subst <span class="nb">.</span>
<span class="o">[</span>INFO] Linked ./cli.jar to /usr/share/java/commons-cli.jar
<span class="o">[</span>INFO] Linked ./log4j.jar to /usr/share/java/log4j.jar
<span class="o">[</span>INFO] Linked ./junit4.jar to /usr/share/java/junit.jar
<span class="nv">$ </span><span class="nb">ls</span> <span class="nt">-la</span>
lrwxrwxrwx. 1 msrb msrb   22 Oct 22 10:08 cli.jar -&gt; /usr/share/java/commons-cli.jar
lrwxrwxrwx. 1 msrb msrb   22 Oct 22 10:08 junit4.jar -&gt; /usr/share/java/junit.jar
lrwxrwxrwx. 1 msrb msrb   22 Oct 22 10:08 log4j.jar -&gt; /usr/share/java/log4j.jar</code></pre>
</div>
</div>
<div class="paragraph">
<p>The example above shows how easy the symlinking can be. However, there are some limitations.
Original JAR files need to carry metadata which tell <code>xmvn-subst</code> for what artifact given file should be substituted.
Otherwise <code>xmvn-subst</code> won&#8217;t be able to identify the Maven artifact from JAR file.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<img src="./images/icons/tip.png" alt="Tip">
</td>
<td class="content">
<div class="paragraph">
<p>See <code>xmvn-subst -h</code> for all available options.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_ant">6. Ant</h2>
<div class="sectionbody">
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Apache Ant is a Java library and command-line tool whose mission is to drive processes described in build files as targets and extension points dependent upon each other.</p>
</div>
</blockquote>
<div class="attribution">
<cite>https://ant.apache.org/</cite>
</div>
</div>
<div class="paragraph">
<p>Apache Ant is one of the most popular Java build tools after Apache Maven.
The main difference between these two tools is that Ant is procedural and Maven is declarative.
When using Ant, it is neccessary to exactly describe the processes which lead to the result.
It means that one needs to specify where the source files are, what needs to be done and when it needs to be done.
On the other hand, Maven relies on conventions and doesn&#8217;t require specifying most of the process unless you need to override the defaults.</p>
</div>
<div class="paragraph">
<p>If upstream ships a Maven POM file, it must be installed even if you don&#8217;t build with Maven.
If not, you should try to search Maven Central Repository for it, ship it as another source and install it.</p>
</div>
<div class="listingblock">
<div class="title">Common spec file</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="spec">BuildRequires: ant
BuildRequires: javapackages-local
...
%build
ant test

%install
%mvn_artifact pom.xml lib/%{name}.jar

%mvn_install -J api/

%files -f .mfiles
%files javadoc -f .mfiles-javadoc</code></pre>
</div>
</div>
<div class="ulist">
<div class="title">Details</div>
<ul>
<li>
<p><code>%build</code> section uses <code>ant</code> command to build the project and run the tests.
The used target(s) may vary depending on the <code>build.xml</code> file.
You can use <code>ant -p</code> command to list the project info or manually look for <code>&lt;target&gt;</code> nodes in the <code>build.xml</code> file.</p>
</li>
<li>
<p><code>%mvn_artifact</code> macro is used to request installation of an artifact that was not built using Maven.
It expects a POM file and a JAR file.
For POM only artifacts, the JAR part is omitted.
See <a href="#_installing_additional_artifacts">Installing additional artifacts</a> for more information.</p>
</li>
<li>
<p><code>%mvn_install</code> performs the actual installation.
Optional <code>-J</code> parameter requests installation of generated Javadoc from given directory.</p>
</li>
<li>
<p>This method of artifact installation allows using other XMvn macros such as <code>%mvn_alias</code> or <code>%mvn_package</code>.</p>
</li>
<li>
<p><code>%mvn_install</code> generates <code>.mfiles</code> file which should be used to populate <code>%files</code> section with <code>-f</code> switch.
For each subpackage there would be separate generated file named <code>.mfiles-subpackage-name</code>.</p>
</li>
<li>
<p>All packages are required to own directories which they create (and which are not owned by other packages).
JAR files are by default installed into subdirectory of <code>%{_javadir}</code>. To override this behavior, use <code>%mvn_file</code>.</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_apache_ivy">6.1. Apache Ivy</h3>
<div class="paragraph">
<p>Apache Ivy provides an automatic dependency management for Ant managed builds.
It uses Maven repositories for retrieving artifacts and supports many declarative features of Maven such as handling transitive dependencies.</p>
</div>
<div class="paragraph">
<p>XMvn supports local resolution of Ivy artifacts, their installation and requires generation.</p>
</div>
<div class="listingblock">
<div class="title">Spec file</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="spec">BuildRequires: ivy-local
...
%build
ant -Divy.mode=local test

%install
%mvn_artifact ivy.xml lib/sample.jar

%mvn_install -J api/

%files -f .mfiles
%files -javadoc -f .mfiles-javadoc</code></pre>
</div>
</div>
<div class="ulist">
<div class="title">Details</div>
<ul>
<li>
<p><code>-Divy.mode=local</code> tells Ivy to use XMvn local artifact resolution instead of downloading from the Internet.</p>
</li>
<li>
<p>If there is an <code>ivy-settings.xml</code> or similar file, which specifies remote repositories, it needs to be disabled, otherwise it would override local resolution.</p>
</li>
<li>
<p><code>%mvn_artifact</code> supports installing artifacts described by Ivy configuration files.</p>
</li>
<li>
<p><code>%mvn_install</code> performs the actual installation. Optional <code>-J</code> parameter requests installation of generated Javadoc from given directory.</p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title">Ivy files manipulation</div>
<p>A subset of macros used to modify Maven POMs also work with <code>ivy.xml</code> files allowing the maintainer to add / remove / change dependencies without the need of making patches and rebasing them with each change.
You can use dependency handling macros <code>%pom_add_dep</code>, <code>%pom_remove_dep</code>, <code>%pom_change_dep</code> and generic <code>%pom_xpath_*</code> macros.
For more details, see corresponding manpages.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="spec"># Remove dependency on artifact with org="com.example" and
# name="java-project" from ivy.xml file in current directory
%pom_remove_dep com.example:java-project

# Add dependency on artifact with org="com.example" and
# name="foobar" to ./submodule/ivy.xml
%pom_add_dep com.example:foobar submodule</code></pre>
</div>
</div>
<div class="paragraph">
<div class="title">Using the <code>ivy:publish</code> task</div>
<p>Ivy supports publishing built artifact with <code>ivy:publish</code> task.
If your <code>build.xml</code> file already contains a task that calls <code>ivy:publish</code>, you can set the resolver attribute of the <code>ivy:publish</code> element to <code>xmvn</code>.
This can be done with simple <code>%pom_xpath_set</code> call.
Then when the task is run, XMvn can pick the published artifacts and install them during the run of <code>%mvn_install</code> without needing you to manually specify them with <code>%mvn_artifact</code>.</p>
</div>
<div class="listingblock">
<div class="title">Spec file using the <code>ivy:publish</code> task</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="spec">BuildRequires: ivy-local
...
%prep
%pom_xpath_set ivy:publish/@resolver xmvn build.xml

%build
ant -Divy.mode=local test publish-local

%install
%mvn_install -J api/

%files -f .mfiles
%files -javadoc -f .mfiles-javadoc</code></pre>
</div>
</div>
<div class="ulist">
<div class="title">Details</div>
<ul>
<li>
<p>The publish target may be named differently. Search the <code>build.xml</code> for occurences of <code>ivy:publish</code>.</p>
</li>
<li>
<p><code>%mvn_install</code> will install all the published artifacts.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_maven">7. Maven</h2>
<div class="sectionbody">
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Apache Maven is a software project management and comprehension tool.
Based on the concept of a project object model (POM), Maven can manage a project&#8217;s build, reporting and documentation from a central piece of information.</p>
</div>
</blockquote>
<div class="attribution">
<cite>https://maven.apache.org</cite>
</div>
</div>
<div class="paragraph">
<p>Maven is by far the most consistent Java build system, allowing large amount of automation.
In most common situations only following steps are necessary:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In <code>%build</code> section of the spec file use <code>%mvn_build</code> macro.</p>
</li>
<li>
<p>In <code>%install</code> section, use <code>%mvn_install</code> macro.</p>
</li>
<li>
<p>Use generated file <code>.mfiles</code> lists to populate <code>%files</code> section with <code>-f</code> switch.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="title">Common spec file sections</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="spec">BuildRequires:  maven-local
...
%build
%mvn_build
...

%install
%mvn_install
...

%files -f .mfiles
%dir %{_javadir}/%{name}

%files javadoc -f .mfiles-javadoc</code></pre>
</div>
</div>
<div class="paragraph">
<p>The macros <code>%mvn_build</code> and <code>%mvn_install</code> automatically handle building of the JAR files and their subsequent installation to the correct directory.
The corresponding POM and metadata files are also installed.</p>
</div>
<div class="sect2">
<h3 id="_packaging_maven_project">7.1. Packaging Maven project</h3>
<div class="paragraph">
<p>This step by step guide will show you how to package Maven project.
Let&#8217;s start with probably the simplest spec file possible.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="spec"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
</pre></td><td class="code"><pre>Name:           simplemaven
Version:        1.0
Release:        1%{?dist}
Summary:        Simple Maven project
License:        BSD
URL:            https://www.example.com
Source0:        https://www.example.com/simplemaven-1.0.tar.gz
BuildArch:      noarch

BuildRequires:  maven-local

%description
This is simple Maven project.

%package        javadoc
Summary:        Javadoc for %{name}

%description javadoc
This package contains the API documentation for %{name}.

%prep
%setup -q

%build
%mvn_build

%install
%mvn_install

%files -f .mfiles
%files javadoc -f .mfiles-javadoc

%changelog
* Mon Oct 14 2013 Michal Srb &lt;msrb@redhat.com&gt; - 1.0-1
- Initial packaging
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>The spec file above is a real world example how it may look like for simple Maven project.
Both <code>%build</code> and <code>%install</code> sections consist only of one line.</p>
</div>
<div class="paragraph">
<p>Another interesting line:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="spec">10: BuildRequires:  maven-local</code></pre>
</div>
</div>
<div class="paragraph">
<p>All Maven projects need to have <code>BuildRequires</code> on <code>maven-local</code>.
They also need to have <code>Requires</code> and <code>BuildRequires</code> on <code>jpackages-utils</code>, but build system adds these automatically.
The package maintainer does not need to list them explicitly.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="spec">31: %dir %{_javadir}/%{name}</code></pre>
</div>
</div>
<div class="paragraph">
<p>By default, resulting JAR files will be installed in <code>%{_javadir}/%{name}</code>, therefore the package needs to own this directory.</p>
</div>
<div class="paragraph">
<p>The build could fail from many reasons, but one probably most common is build failure due to <a href="#_missing_dependency">missing dependencies</a>.</p>
</div>
<div class="paragraph">
<p>We can try to remove these missing dependencies from pom.xml and make Maven stop complaining about them.
However, these removed dependencies may be crucial for building of the project and therefore it may be needed to package them later.
Let&#8217;s remove the dependencies from <code>pom.xml</code>.</p>
</div>
<div class="listingblock">
<div class="title">Remove dependencies from pom.xml</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="spec">...
%prep
%setup -q

# Add following lines to %prep section of a spec file
%pom_remove_dep :commons-io
%pom_remove_dep :junit</code></pre>
</div>
</div>
<div class="paragraph">
<p>The package maintainer can use a wide variety of &#8220;pom_&#8221; macros for modifying <code>pom.xml</code> files.
See the <a href="#_macros_for_pom_modification">Macros for POM modification</a> section for more information.</p>
</div>
<div class="paragraph">
<p>Now try to build the project again.
The build will fail with a <a href="#_compilation_failure">compilation failure</a>.</p>
</div>
<div class="paragraph">
<p>Oops, another problem.
This time Maven thought it had all the necessary dependencies, but Java compiler found otherwise.</p>
</div>
<div class="paragraph">
<p>Now it is possible to either patch the source code not to depend on missing libraries or to package them.
The second approach is usually correct.
It is not necessary to package every dependency right away.
The maintainer could package compile time dependencies first and keep the rest for later (test dependencies, etc.).
But Maven needs to know that it should not try to run tests now.
This can be achieved by passing <code>-f</code> option to <code>%mvn_build</code> macro.
Maven will stop complaining about missing test scoped dependencies from now on.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<img src="./images/icons/tip.png" alt="Tip">
</td>
<td class="content">
<div class="paragraph">
<p>Another reason to disable the test phase is to speed up the local build process.
This can also be achieved by specifying an additional switch <code>--without=tests</code> to the <code>fedpkg</code> or the <code>mock</code> tool instead of adding a switch to <code>%mvn_build</code>.</p>
</div>
<div class="paragraph">
<p>Another switch <code>--without=javadoc</code> causes the build to skip Javadoc generation.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<img src="./images/icons/note.png" alt="Note">
</td>
<td class="content">
<div class="paragraph">
<p>It is always recommended to run all available test suites during build.
It greatly improves quality of the package.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>We already have package which provides <code>commons-io:commons-io</code> artifact, let&#8217;s add it to the <code>BuildRequires</code>.
Also disable tests for now.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="spec">BuildRequires:  maven-local
BuildRequires:  apache-commons-io
...
%prep
%setup -q

# Comment out following lines in %prep section
#%%pom_remove_dep :commons-io
#%%pom_remove_dep :junit

%build
# Skip tests for now, missing dependency junit:junit:4.11
%mvn_build -f</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<img src="./images/icons/tip.png" alt="Tip">
</td>
<td class="content">
<div class="paragraph">
<p>One can easily search for package which provides the desired artifact.
Try <code>dnf repoquery --whatprovides 'mvn(commons-io:commons-io)'</code>, or see how to <a href="#_querying_repositories">query repositories</a>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Now try to build the project one more time.
The build should succeed now.
Congrats, you managed to create an RPM from Maven project!</p>
</div>
<div class="paragraph">
<p>There is plenty of other things maintainer may want to do.
For example, they may want to provide symbolic links to the JAR file in <code>%{_javadir}</code>.</p>
</div>
<div class="paragraph">
<p>This can be easily achieved with <code>%mvn_file</code> macro:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="spec">%prep
%setup -q

%mvn_file : %{name}/%{name} %{name}</code></pre>
</div>
</div>
<div class="paragraph">
<p>See <a href="#_alternative_jar_file_names">Alternative JAR File Names</a> section for more information.</p>
</div>
<div class="paragraph">
<p>Another quite common thing to do is adding aliases to Maven artifact.
Try to run <code>rpm -qp --provides</code> on your locally built RPM package:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="nv">$ </span>rpm <span class="nt">-qp</span> <span class="nt">--provides</span> simplemaven-1.0-1.fc21.noarch.rpm
mvn<span class="o">(</span>com.example:simplemaven<span class="o">)</span> <span class="o">=</span> 1.0
simplemaven <span class="o">=</span> 1.0-1.fc21</code></pre>
</div>
</div>
<div class="paragraph">
<p>The output above tells us that the RPM package provides Maven artifact <code>com.example:simplemaven:1.0</code>.
Upstream may change the <code>groupId:artifactId</code> with any new release.
And it happens.
For example <code>org.apache.commons:commons-io</code> changed to <code>commons-io:commons-io</code> some time ago.
It is not a big deal for package itself, but it is a huge problem for other packages that depends on that particular package.
Some packages may still have dependencies on old <code>groupId:artifactId</code>, which is suddenly unavailable.
Luckily, there is an easy way how to solve the problems like these.
Package maintainer can add aliases to actually provided Maven artifact.</p>
</div>
<div class="listingblock">
<div class="title">Add alias to Maven artifact</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="spec">%mvn_alias org.example:simplemaven simplemaven:simplemaven</code></pre>
</div>
</div>
<div class="paragraph">
<p>See <a href="#_additional_mappings">Additional Mappings</a> for more information on <code>%mvn_alias</code>.</p>
</div>
<div class="paragraph">
<p>Rebuild the pacakge and check <code>rpm -qp --provides</code> output again:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="nv">$ </span>rpm <span class="nt">-qp</span> <span class="nt">--provides</span> simplemaven-1.0-2.fc21.noarch.rpm
mvn<span class="o">(</span>com.example:simplemaven<span class="o">)</span> <span class="o">=</span> 1.0
mvn<span class="o">(</span>simplemaven:simplemaven<span class="o">)</span> <span class="o">=</span> 1.0
simplemaven <span class="o">=</span> 1.0-2.fc21</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now it does not matter if some other package depends on either of these listed artifact.
Both dependencies will always be satisfied with your package.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<img src="./images/icons/note.png" alt="Note">
</td>
<td class="content">
<div class="paragraph">
<p>One could try to fix dependencies in all the dependent packages instead of adding an alias to single package.
It is almost always wrong thing to do.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_macros_for_maven_build_configuration">7.2. Macros for Maven build configuration</h3>
<div class="paragraph">
<p>Maven builds can be configured to produce alternative layout, include additional aliases in package metadata or create separate subpackages for certain artifacts.</p>
</div>
<div class="sect3">
<h4 id="_installing_additional_artifacts">7.2.1. Installing additional artifacts</h4>
<div class="paragraph">
<p>It is possible to explicitly request an installation of any Maven artifact (JAR / POM file).
Macro <code>%mvn_install</code> only knows about Maven artifacts that were created during execution of <code>%mvn_build</code>.
Normally, any other artifacts which were built by some other method would need to be installed manually.
<code>%mvn_build</code> macro does not even need to be used at all.
Luckily, all artifacts created outside of <code>%mvn_build</code> can be marked for installation with <code>%mvn_artifact</code> macro.
This macro creates configuration for <code>%mvn_install</code>.</p>
</div>
<div class="listingblock">
<div class="title">Requesting installation of Maven artifact</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="spec">%prep
...
# Request installation of POM and JAR file
%mvn_artifact subpackage/pom.xml target/artifact.jar
# Request installation of POM artifact (no JAR file)
%mvn_artifact pom.xml
# Request installation for JAR file specified by artifact coordinates
%mvn_artifact webapp:webapp:war:3.1 webapp.war</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_additional_mappings">7.2.2. Additional Mappings</h4>
<div class="paragraph">
<p>The macro <code>%mvn_alias</code> can be used to add additional mappings for given POM / JAR file.
For example, if the POM file indicates that it contains <code>groupId</code> <code>commons-lang</code>, <code>artifactId</code> <code>commons-lang</code>, this macro ensures that we also add a mapping between <code>groupId</code> <code>org.apache.commons</code> and the installed JAR / POM files.
This is necessary in cases where the groupId or artifactId may have changed, and other packages might require different IDs than those reflected in the installed POM.</p>
</div>
<div class="listingblock">
<div class="title">Adding more mappings for JAR/POM files example</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="spec">%prep
...
%mvn_alias "commons-lang:commons-lang" "org.apache.commons:commons-lang"</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_alternative_jar_file_names">7.2.3. Alternative JAR File Names</h4>
<div class="paragraph">
<p>In some cases, it may be important to be able to provide symbolic links to actual JAR files.
This can be achieved with <code>%mvn_file</code> macro.
This macro allows packager to specify names of the JAR files, their location in <code>%{_javadir}</code> directory and also can create symbolic links to the JAR files.
These links can be possibly located outside of the <code>%{_javadir}</code> directory.</p>
</div>
<div class="listingblock">
<div class="title">Adding file symlinks to compatibility</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="spec">%prep
...
%mvn_file :guice google/guice guice</code></pre>
</div>
</div>
<div class="paragraph">
<p>This means that JAR file for artifact with ID "guice" (and any <code>groupId</code>) will be installed in <code>%{_javadir}/google/guice.jar</code> and there also will be a symbolic links to this JAR file located in <code>%{_javadir}/guice.jar</code>.
Note the macro will add <code>.jar</code> extensions automatically.</p>
</div>
</div>
<div class="sect3">
<h4 id="_single_artifact_per_package">7.2.4. Single Artifact Per Package</h4>
<div class="paragraph">
<p>If the project consists of multiple artifacts, it is recommended to install each artifact to the separate subpackage.
The macro <code>%mvn_build -s</code> will generate separate <code>.mfiles</code> file for every artifact in the project.
This file contains list of files related to specific artifact (typically JAR file, POM file and metadata).
It can be later used in <code>%files</code> section of the spec file.</p>
</div>
<div class="listingblock">
<div class="title">Creating one subpackage for each generated artifact</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="spec">...
%description
The Maven Plugin Tools contains...

%package -n maven-plugin-annotations
Summary:        Maven Plugin Java 5 Annotations

%description -n maven-plugin-annotations
This package contains Java 5 annotations to use in Mojos.

%package -n maven-plugin-plugin
Summary:        Maven Plugin Plugin

%description -n maven-plugin-plugin
The Plugin Plugin is used to...
...

%build
%mvn_build -s

%install
%mvn_install

%files -f .mfiles-maven-plugin-tools
%doc LICENSE NOTICE
%files -n maven-plugin-annotations -f .mfiles-maven-plugin-annotations
%files -n maven-plugin-plugin      -f .mfiles-maven-plugin-plugin
%files -f .mfiles-javadoc
...</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_assignment_of_the_maven_artifacts_to_the_subpackages">7.2.5. Assignment of the Maven Artifacts to the Subpackages</h4>
<div class="paragraph">
<p>The macro <code>%mvn_package</code> allows maintainer to specify in which exact package the selected artifact will end up.
It is something between singleton packaging, when each artifact has its own subpackage and default packaging, when all artifacts end up in the same package.</p>
</div>
<div class="listingblock">
<div class="title">Assigning multiple artifacts to single subpackage</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="spec">...
%prep
%mvn_package ":plexus-compiler-jikes"   plexus-compiler-extras
%mvn_package ":plexus-compiler-eclipse" plexus-compiler-extras
%mvn_package ":plexus-compiler-csharp"  plexus-compiler-extras

%build
%mvn_build

%install
%mvn_install

%files -f .mfiles
%files -f .mfiles-plexus-compiler-extras
%files -f .mfiles-javadoc</code></pre>
</div>
</div>
<div class="paragraph">
<p>In above example, the artifacts <code>plexus-compiler-jikes</code>, <code>plexus-compiler-eclipse</code>, <code>plexus-compiler-csharp</code> will end up in package named <code>plexus-compiler-extras</code>.
If there are some other artifacts beside these three mentioned (e.g. some parent POMs), then these will all end up in package named <code>%{name}</code>.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<img src="./images/icons/tip.png" alt="Tip">
</td>
<td class="content">
<div class="paragraph">
<p><code>%mvn_package</code> macro supports wildcards and brace expansions, so whole <code>%prep</code> section from previous example can be replaced with single line: <code>%mvn_package ":plexus-compiler-{jikes,eclipse,csharp}" plexus-compiler-extras</code>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>It is possible to assign artifacts into a package called <code>__noinstall</code>.
This package name has a special meaning.
And as you can guess, artifacts assigned into this package will not be installed anywhere and the package itself will not be created.</p>
</div>
<div class="listingblock">
<div class="title">Skipping installation of an artifact</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="spec">%prep
...
%mvn_package groupId:artifactId __noinstall</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_modifying_xmvn_configuration_from_within_spec_file">7.2.6. Modifying XMvn configuration from within spec file</h4>
<div class="paragraph">
<p>Some packages might need to modify XMvn&#8217;s configuration in order to build successfully or from other reasons.
This can be achieved with <code>mvn_config</code> macro.
For example, some old package can use <code>enum</code> as an identifier, but it is also keyword since Java 1.5.
Such package will probably fail to build on current systems.
This problem can be easily solved by passing <code>-source 1.4</code> to the compiler, so one could add following line to the spec file:</p>
</div>
<div class="listingblock">
<div class="title">Overriding default XMvn configuration</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="spec">%prep
...
%mvn_config buildSettings/compilerSource 1.4</code></pre>
</div>
</div>
<div class="paragraph">
<p>XMvn&#8217;s configuration is quite complex, but well documented at the project&#8217;s <a href="https://mizdebsk.fedorapeople.org/xmvn/site/">official website</a>.
The website should always be used as a primary source of information about XMvn configuration.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<img src="./images/icons/tip.png" alt="Tip">
</td>
<td class="content">
<div class="paragraph">
<p>Read about XMvn&#8217;s configuration <a href="https://mizdebsk.fedorapeople.org/xmvn/site/configuration.html">basics</a> and see the full <a href="https://mizdebsk.fedorapeople.org/xmvn/site/config.html">configuration reference</a>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<img src="./images/icons/tip.png" alt="Tip">
</td>
<td class="content">
<div class="paragraph">
<p>All <code>%mvn_</code> macros have their own manual page which contains details on how to use them.
All possible options should be documented there.
These manual pages should be considered most up to date documentation right after source code.
Try for example <code>man mvn_file</code>.
These pages are also included in the <a href="#_manpages">Appendix</a>.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_macros_for_pom_modification">7.3. Macros for POM modification</h3>
<div class="paragraph">
<p>Sometimes Maven <code>pom.xml</code> files need to be patched before they are used to build packages.
One could use traditional patches to maintain changes, but package maintainers should use <code>%pom_*</code> macros developed specially to ease this task.
Using <code>%pom_*</code> macros not only increases readability of the spec file, but also improves maintainability of the package as there are no patches that would need to be rebased with each upstream release.</p>
</div>
<div class="paragraph">
<p>There are two categories of macros:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>POM-specific macros - used to manipulate dependencies, modules, etc.
Some of them also work on <code>ivy.xml</code> files.</p>
</li>
<li>
<p>Generic XML manipulation macros - used to add / remove / replace XML nodes.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The macros are designed to be called from <code>%prep</code> section of spec files.
All the macros also have their own manual page.
This document provides an overview of how they are used.
For the technical details, refer to their respective <a href="#_manpages">manpages</a>.</p>
</div>
<div class="paragraph">
<div class="title">File specfication</div>
<p>By default, a macro acts on a <code>pom.xml</code> file (or <code>ivy.xml</code> file) in the current directory.
Different path can be explicitly specified via an argument (the last one, unless stated otherwise).
Multiple paths can be specified as multiple arguments.
If a path is a directory, it looks for a <code>pom.xml</code> file in that directory.
For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="spec"># The following works on pom.xml file in the current directory
%pom_remove_parent

# The following works on submodule/pom.xml
%pom_remove_parent submodule

# The following works on submodule/pom.xml as well
%pom_remove_parent submodule/pom.xml

# The following works on submodule2/pom.xml and submodule2/pom.xml
%pom_remove_parent submodule1 submodule2</code></pre>
</div>
</div>
<div class="paragraph">
<div class="title">Recursive mode</div>
<p>Most macros also support <strong>recursive</strong> mode, where the change is applied to the <code>pom.xml</code> and all its modules recursively.
This can be used, for example, to remove a dependency from the whole project.
It is activated by <code>-r</code> switch.</p>
</div>
<div class="sect3">
<h4 id="_dependency_manipulation_macros">7.3.1. Dependency manipulation macros</h4>
<div class="paragraph">
<div class="title">Removing dependencies</div>
<p>Often dependencies specified in Maven <code>pom.xml</code> files need to be removed because of different reasons.
<code>%pom_remove_dep</code> macro can be used to ease this task:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="spec"># Removes dependency with groupId "foo" and artifactId "bar" from pom.xml
%pom_remove_dep foo:bar

# Removes dependency on all artifacts with groupId "foo" from pom.xml
%pom_remove_dep foo:

# Removes dependency on all artifacts with artifactId "bar" from pom.xml
%pom_remove_dep :bar

# Removes dependency on all artifacts with artifactId "bar" from submodule1/pom.xml
%pom_remove_dep :bar submodule1

# Removes dependency on all artifacts with artifactId "bar" from pom.xml
# and all its submodules
%pom_remove_dep -r :bar

# Removes all dependencies from pom.xml
%pom_remove_dep :</code></pre>
</div>
</div>
<div class="paragraph">
<div class="title">Adding dependencies</div>
<p>Dependencies can also be added to <code>pom.xml</code> with <code>%pom_add_dep</code> macro.
Usage is very similar to <code>%pom_remove_dep</code>, see <code>$ man pom_add_dep</code> for more information.</p>
</div>
<div class="paragraph">
<div class="title">Changing dependencies</div>
<p>Sometimes the artifact coordinates used in upstream <code>pom.xml</code> do not correspond to ones used in Fedora and you need to modify them.
<code>%pom_change_dep</code> macro will modify all dependencies matching the first argument to artifact coordinates specified by the second argument.
Note this macro also works in recursive mode.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="spec"># For all artifacts in pom.xml that have groupId 'example' change it to
# 'com.example' while leaving artifactId and other parts intact
%pom_change_dep example: com.example:</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_adding_removing_plugins">7.3.2. Adding / removing plugins</h4>
<div class="paragraph">
<p><code>%pom_remove_plugin</code> macro works exactly as <code>%pom_remove_dep</code>, except it removes Maven plugin invocations.
Some examples:</p>
</div>
<div class="listingblock">
<div class="title">Removing Maven plugins from pom.xml files</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="spec"># Disables maven-jar-plugin so that classpath isn't included in manifests
%pom_remove_plugin :maven-jar-plugin

# Disable a proprietary plugin that isn't packaged for Fedora
%pom_remove_plugin com.example.mammon:useless-proprietary-plugin submodule</code></pre>
</div>
</div>
<div class="paragraph">
<p>Like in previous case, there is also a macro for adding plugins to <code>pom.xml</code>.
See its <a href="#_pom_add_plugin">manual page</a> for more information.</p>
</div>
</div>
<div class="sect3">
<h4 id="_disabling_unneeded_modules">7.3.3. Disabling unneeded modules</h4>
<div class="paragraph">
<p>Sometimes some submodules of upstream project cannot be built for various reasons and there is a need to disable them.
This can be achieved by using <code>%pom_disable_module</code>, for example:</p>
</div>
<div class="listingblock">
<div class="title">Disabling specific project modules</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="spec"># Disables child-module-1, a submodule of the main pom.xml file
%pom_disable_module child-module-1

# Disables grandchild-module, a submodule of child-module-2/pom.xml
%pom_disable_module grandchild-module child-module-2</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_working_with_parent_pom_references">7.3.4. Working with parent POM references</h4>
<div class="paragraph">
<p>Macro <code>%pom_remove_parent</code> removes reference to a parent POM from Maven POM files.
This can be useful when parent POM is not yet packaged (e.g. because of licensing issues) and at the same time it is not really needed for building of the project.
There are also macros for adding parent POM reference (<code>%pom_add_parent</code>) and replacing existing reference with new one (<code>%pom_set_parent</code>).</p>
</div>
<div class="listingblock">
<div class="title">Manipulating parent POM references</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="spec"># Remove reference to a parent POM from ./pom.xml
%pom_remove_parent

# Remove reference to a parent POM from ./submodule/pom.xml
%pom_remove_parent submodule

# Add parent POM reference to ./pom.xml
%pom_add_parent groupId:artifactId

# Replace existing parent POM reference in ./pom.xml
%pom_set_parent groupId:artifactId:version</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_macros_for_performing_generic_modifications">7.3.5. Macros for performing generic modifications</h4>
<div class="paragraph">
<p>The above macros cover the most common cases of modifying <code>pom.xml</code> files, however if there is a need to apply some less-common patches there are also three generic macros for modifying <code>pom.xml</code> files.
These generic macros can also be applied to other XML files, such as Ant&#8217;s <code>build.xml</code> files.</p>
</div>
<div class="paragraph">
<p>They all take a <a href="https://www.w3.org/TR/xpath/">XPath</a> 1.0 expression that selects XML nodes to be acted on (removed, replaced, etc.).</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<img src="./images/icons/note.png" alt="Note">
</td>
<td class="content">
<div class="title">Handling XML namespaces</div>
<div class="paragraph">
<p>POM files use a specific namespace - <code>http://maven.apache.org/POM/4.0.0</code>.
The easiest way to respect this namespace in XPath expressions is prefixing all node names with <code>pom:</code>.
For example, <code>pom:environment/pom:os</code> will work because it selects nodes from <code>pom</code> namespace, but <code>environment/os</code> won&#8217;t find anything because it looks for nodes that do not belong to any XML namespace.
It is needed even if the original POM file didn&#8217;t contain proper POM namespace, since it will be added automatically.
Note that this requirement is due to limitation of XPath 1.0 and we cannot work it around.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<div class="title">Removing nodes</div>
<p><code>%pom_xpath_remove</code> can be used to remove arbitrary XML nodes.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="spec"># Removes extensions from the build
%pom_xpath_remove "pom:build/pom:extensions" module/pom.xml</code></pre>
</div>
</div>
<div class="paragraph">
<div class="title">Injecting nodes</div>
<p><code>%pom_xpath_inject</code> macro is capable of injecting arbitrary XML code to any <code>pom.xml</code> file.
The injected code is the last argument - optional file paths go before it (unlike most other macros).
To pass a multiline snippet, quote the argument as in the following example.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="spec"># Add additional exclusion into maven-wagon dependency
%pom_xpath_inject "pom:dependency[pom:artifactId='maven-wagon']/pom:exclusions" "
&lt;exclusion&gt;
  &lt;groupId&gt;antlr&lt;/groupId&gt;
  &lt;artifactId&gt;antlr&lt;/artifactId&gt;
&lt;/exclusion&gt;"
# The same thing, but with explicit file path
%pom_xpath_inject "pom:dependency[pom:artifactId='maven-wagon']/pom:exclusions" pom.xml "
&lt;exclusion&gt;
  &lt;groupId&gt;antlr&lt;/groupId&gt;
  &lt;artifactId&gt;antlr&lt;/artifactId&gt;
&lt;/exclusion&gt;"</code></pre>
</div>
</div>
<div class="paragraph">
<div class="title">Changing nodes' content</div>
<p><code>%pom_xpath_set</code> replaces content of the arbitrary XML nodes with specified value (can contain XML nodes).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="spec"># Change groupId of a parent
%pom_xpath_set "pom:parent/pom:groupId" "org.apache"</code></pre>
</div>
</div>
<div class="paragraph">
<div class="title">Replacing nodes</div>
<p><code>%pom_xpath_replace</code> replaces a XML node with specified XML code.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="spec"># Change groupId of a parent (note the difference from %pom_xpath_set)
%pom_xpath_replace "pom:parent/pom:groupId" "&lt;groupId&gt;org.apache&lt;/groupId&gt;"</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_common_errors">8. Common Errors</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This section contains explanations and solutions/workarounds for common errors which can be encountered during packaging.</p>
</div>
<div class="sect2">
<h3 id="_missing_dependency">8.1. Missing dependency</h3>
<div class="listingblock">
<div class="content">
<pre>[ERROR] Failed to execute goal on project simplemaven:
Could not resolve dependencies for project com.example:simplemaven:jar:1.0:
The following artifacts could not be resolved: commons-io:commons-io:jar:2.4, junit:junit:jar:4.11:
Cannot access central (http://repo.maven.apache.org/maven2) in offline mode and the artifact commons-io:commons-io:jar:2.4 has not been downloaded from it before. -&gt; [Help 1]</pre>
</div>
</div>
<div class="paragraph">
<p>Maven wasn&#8217;t able to build project <code>com.example:simplemaven</code> because it couldn&#8217;t find some dependencies (in this case <code>commons-io:commons-io:jar:2.4</code> and <code>junit:junit:jar:4.11</code>)</p>
</div>
<div class="paragraph">
<p>You have multiple options here:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If you suspect that a dependency is not necessary, you can remove it from <code>pom.xml</code> file and Maven will stop complaining about it.
You can use wide variety of <a href="#_macros_for_pom_modification">macros</a> for modifying POM files.
The one for removing dependencies is called <a href="#_dependency_manipulation_macros"><code>%pom_remove_dep</code></a>.</p>
</li>
<li>
<p>There is a mock plugin that can automate installation of missing dependencies.
When you&#8217;re using mock, pass additional <code>--enable-plugin pm_request</code> argument and the build process would be able to install missing dependencies by itself.
You still need to add the <code>BuildRequires</code> later, because you need to build the package in Koji, where the plugin is not allowed.
You should do so using <code>xmvn-builddep build.log</code>, where <code>build.log</code> is the path to mock&#8217;s build log.
It will print a list of <code>BuildRequires</code> lines, which you can directly paste into the specfile.
To verify that the <code>BuildRequires</code> you just added are correct, you can rebuild the package once more without the plugin enabled.</p>
</li>
<li>
<p>Add the artifacts to <code>BuildRequires</code> manually.
Maven packages have virtual provides in a format <code>mvn(artifact coordinates)</code>, where artifact coordinates are in the format which Maven used in the error message, but without version for non-compat packages (most of the packages you encounter).
Virtual provides can be used directly in <code>BuildRequires</code>, so in this case it would be:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>BuildRequires:  mvn(commons-io:commons-io)
BuildRequires:  mvn(junit:junit)</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_compilation_failure">8.2. Compilation failure</h3>
<div class="listingblock">
<div class="content">
<pre>[ERROR] Failed to execute goal
        org.apache.maven.plugins:maven-compiler-plugin:3.1:compile (default-compile)
        on project simplemaven: Compilation failure: Compilation failure:
[ERROR] /builddir/build/BUILD/simplemaven-1.0/src/main/java/com/example/Main.java:[3,29] package org.apache.commons.io does not exist
[ERROR] /builddir/build/BUILD/simplemaven-1.0/src/main/java/com/example/Main.java:[8,9] cannot find symbol
[ERROR] symbol:   class FileUtils
[ERROR] location: class com.example.Main
[ERROR] -&gt; [Help 1]</pre>
</div>
</div>
<div class="paragraph">
<p>Java compiler couldn&#8217;t find given class on classpath or incompatible version was present.
This could be caused by following reasons:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>pom.xml</code> requires different version of the Maven artifact than the local repository provides</p>
</li>
<li>
<p><code>pom.xml</code> is missing a necessary dependency</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Different versions of same library may provide slightly different API.
This means that project doesn&#8217;t have to be buildable if different version is provided.
If the library in local repository is older than the one required by project, then the library could be updated.
If the project requires older version, then the project should be ported to latest stable version of the library (this may require cooperation with project&#8217;s upstream).
If none of these is possible from some reason, it is still possible to introduce new <code>compat</code> package.
See <a href="#_compatibility_versions">compat packages</a> section for more information on this topic.</p>
</div>
<div class="paragraph">
<p>Sometimes <code>pom.xml</code> doesn&#8217;t list all the necessary dependencies, even if it should.
Dependencies can also depend on some other and typically all these will be available to the project which is being built.
The problem is that local repository may contain different versions of these dependencies.
And even if these versions are fully compatible with the project, they may require slightly different set of dependencies.
This could lead to build failure if <code>pom.xml</code> doesn&#8217;t specify all necessary dependencies and relies on transitive dependencies.
Such a missing dependency may be considered a bug in the project.
The solution is to explicitly add missing dependency to the <code>pom.xml</code>.
This may be easily done by using <code>%pom_add_dep</code> macro.
See the section about <a href="#_macros_for_pom_modification">macros for POM modification</a> for more information.</p>
</div>
</div>
<div class="sect2">
<h3 id="_requires_cannot_be_generated">8.3. Requires cannot be generated</h3>
<div class="listingblock">
<div class="content">
<pre>Following dependencies were not resolved and requires cannot be generated.
Either remove the dependency from pom.xml or add proper packages to
BuildRequires: org.apache.maven.doxia:doxia-core::tests:UNKNOWN</pre>
</div>
</div>
<div class="paragraph">
<p>Most often this error happens when one part of the package depends on an attached artifact which is not being installed.
Automatic RPM requires generator then tries to generate requires on artifact which is not being installed.
This would most likely result in a broken RPM package so generator halts the build.</p>
</div>
<div class="paragraph">
<p>There are usually two possible solutions for this problem:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Install attached artifact in question. For the above error following macro would install artifacts with <code>tests</code> classifiers into <code>tests</code> subpackage.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>%mvn_package :::tests: %{name}-tests</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Remove dependency on problematic artifact. This can involve <code>pom.xml</code> modifications, disabling tests or even code changes so it is usually easier to install the dependency.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_dependencies_with_scope_system">8.4. Dependencies with scope <code>system</code></h3>
<div class="listingblock">
<div class="content">
<pre>[ERROR] Failed to execute goal org.fedoraproject.xmvn:xmvn-mojo:1.2.0:install (default-cli) on project pom: Some reactor artifacts have dependencies with scope "system".
Such dependencies are not supported by XMvn installer.
You should either remove any dependencies with scope "system" before the build or not run XMvn instaler. -&gt; [Help 1]</pre>
</div>
</div>
<div class="paragraph">
<p>Some Maven artifacts try to depend on exact system paths.
Most usually this dependency is either on <code>com.sun:tools</code> or <code>sun.jdk:jconsole</code>.
Dependencies with system scope cause issues with our tooling and requires generators so they are not supported.</p>
</div>
<div class="paragraph">
<p>Easiest way to solve this for above two dependencies is by removing and adding back the dependency without <code>&lt;scope&gt;</code> or <code>&lt;systemPath&gt;</code> nodes:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>%pom_remove_dep com.sun:tools
%pom_add_dep com.sun:tools</pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_migration_from_older_tools">9. Migration from older tools</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This section describes how to migrate packages that use older deprecated tools to current ones.</p>
</div>
<div class="sect2">
<h3 id="_add_maven_depmap_macro">9.1. <code>%add_maven_depmap</code> macro</h3>
<div class="paragraph">
<p><code>%add_maven_depmap</code> macro was used to manually install Maven artifacts that were built with Apache Ant or <code>mvn-rpmbuild</code>.
It is now deprecated and its invocations should be replaced with <code>%mvn_artifact</code> and <code>%mvn_install</code>.</p>
</div>
<div class="paragraph">
<p>Artifact files, Maven POM files and their installation directories no longer need to be manually installed, since that is done during run of <code>%mvn_install</code>.
The installed files also don&#8217;t need to be explicitly enumerated in <code>%files</code> section. Generated file <code>.mfiles</code> should be used instead.</p>
</div>
<div class="paragraph">
<p>Relevant parts of specfile using <code>%add_maven_depmap</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="spec">BuildRequires:  javapackages-tools

Requires:       some-library
...

%build
ant test

%install
install -d -m 755 $RPM_BUILD_ROOT%{_javadir}
install -m 644 target/%{name}.jar $RPM_BUILD_ROOT%{_javadir}/%{name}.jar

install -d -m 755 $RPM_BUILD_ROOT%{_mavenpomdir}
install -m 644 %{name}.pom $RPM_BUILD_ROOT/%{_mavenpomdir}/JPP-%{name}.pom

# Note that the following call is equivalent to invoking the macro
# without any parameters
%add_maven_depmap JPP-%{name}.pom %{name}.jar

# javadoc
install -d -m 755 $RPM_BUILD_ROOT%{_javadocdir}/%{name}
cp -pr api/* $RPM_BUILD_ROOT%{_javadocdir}/%{name}

%files
%{_javadir}/*
%{_mavenpomdir}/*
%{_mavendepmapfragdir}/*

%files javadoc
%doc %{_javadocdir}/%{name}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The same specfile migrated to <code>%mvn_artifact</code> and <code>%mvn_install</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="spec"># mvn_* macros are located in javapackages-local package
BuildRequires:  javapackages-local

# Since XMvn generates requires automatically, it is no longer needed
# nor recommended to specify manual Requires tags, unless the dependency
# information in the POM is incomplete or you need to depend on non-java
# packages
...

%prep
# The default location for installing JAR files is %{_javadir}/%{name}/
# Because our original specfile put the JAR directly to %{_javadir}, we
# want to override this behavior. The folowing call tells XMvn to
# install the groupId:artifactId artifact as %{_javadir}/%{name}.jar
%mvn_file groupId:artifactId %{name}

%build
ant test

# Tell XMvn which artifact belongs to which POM
%mvn_artifact %{name}.pom target/%{name}.jar

%install
# It is not necessary to install directories and artifacts manually,
# mvn_install will take care of it

# Optionally use -J parameter to specify path to directory with built
# javadoc
%mvn_install -J api

# Use autogenerated .mfiles file instead of specifying individual files
%files -f .mfiles
%files javadoc -f .mfiles-javadoc</code></pre>
</div>
</div>
<div class="paragraph">
<div class="title">Aliases and subpackages</div>
<p><code>%add_maven_depmap</code> had <code>-a</code> switch to specify artifact aliases and <code>-f</code> switch to support splitting artifacts across multiple subpackages.
To achieve the same things with <code>%mvn_*</code> macros, see <a href="#_additional_mappings">Additional Mappings</a> and <a href="#_assignment_of_the_maven_artifacts_to_the_subpackages">Assignment of the Maven Artifacts to the Subpackages</a>.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<img src="./images/icons/tip.png" alt="Tip">
</td>
<td class="content">
<div class="paragraph">
<p>If the project consists of multiple artifacts and parent POMs are among them, call <code>%mvn_artifact</code> on these parent POMs first.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_manpages">Appendix A: Manpages</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This section contains manpages for <code>mvn_*</code> and <code>pom_*</code> macros.</p>
</div>
<div class="sect2">
<h3 id="_mvn_alias">A.1. mvn_alias</h3>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title></title>
<style type="text/css">
.ansi2html-content { display: inline; white-space: pre-wrap; word-wrap: break-word; }
.body_foreground { color: #AAAAAA; }
.body_background { background-color: #000000; }
.inv_foreground { color: #000000; }
.inv_background { background-color: #AAAAAA; }
.ansi1 { font-weight: bold; }
.ansi34 { color: #0000aa; }
</style>
</head>
<body class="body_foreground body_background" style="font-size: normal;" >
<pre class="ansi2html-content">
MVN_ALIAS(7)                  Java Packages Tools                 MVN_ALIAS(7)



<span class="ansi1">NAME</span>
       mvn_alias - add alias(es) for Maven artifact(s)

<span class="ansi1">SYNOPSIS</span>
       <span class="ansi1">%mvn_alias </span>artifact-coordinates alias [alias ...]

<span class="ansi1">DESCRIPTION</span>
       <span class="ansi1">mvn_alias </span>macro causes instructions for artifact installation to be
       added to XMvn reactor configuration. It is used to specify alternative
       names (aliases) for Maven artifacts.

       Specified artifact coordinates must match at least one artifact. If not
       then behavior is unspecified. It is possible to specify artifact
       coordinates matching multiple artifacts, so one call to <span class="ansi1">mvn_alias </span>can
       affect installation of more than one artifact.

<span class="ansi1">OPERANDS</span>
       <span class="ansi1">artifact-coordinates</span>
           Artifact coordinates specify artifact(s) that this rule applies to.
           Coordinates are in format
           <span class="ansi1">groupId:artifactId[:extension[:classifier]][:version]</span>. If extension
           is specified then version must be specified too. If any part is
           omitted or equal to empty string then it matches any string.
           Wildcards and brace expansions are supported in each part. For more
           information see XMvn Configuration Reference.

       <span class="ansi1">alias</span>
           Coordinates specifying artifact alias (alternative name under which
           matching artifacts will be available). Coordinates are in format
           <span class="ansi1">groupId:artifactId[:extension[:classifier]][:version]</span>. If extension
           is specified then version must be specified too. If any part is
           omitted or equal to empty string then corresponding part from
           <span class="ansi1">artifact-coordinates </span>will be substituted. Backreferences are
           supported in form <span class="ansi1">@n</span>, where <span class="ansi1">n </span>is an integer corresponding to brace
           in <span class="ansi1">artifact-coordinates</span>.

<span class="ansi1">AUTHOR</span>
       Originally written by Mikolaj Izdebski. Versions 3.0.0 and later were
       written by Stanislav Ochotnicky.

<span class="ansi1">REPORTING BUGS</span>
       Bugs should be reported through Java Packages Tools issue tracker at
       Github: <span class="ansi34"></span><span class="ansi1 ansi34">https://github.com/fedora-java/javapackages/issues</span><span class="ansi1"></span>.

<span class="ansi1">SEE ALSO</span>
       <span class="ansi1">gradle_build</span>(7), <span class="ansi1">mvn_build</span>(7), <span class="ansi1">mvn_compat_version</span>(7), <span class="ansi1">mvn_config</span>(7),
       <span class="ansi1">mvn_file</span>(7), <span class="ansi1">mvn_package</span>(7), <span class="ansi1">xmvn</span>(1).



JAVAPACKAGES                      01/25/2023                      MVN_ALIAS(7)

</pre>
</body>

</html>
</div>
<div class="sect2">
<h3 id="_mvn_artifact">A.2. mvn_artifact</h3>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title></title>
<style type="text/css">
.ansi2html-content { display: inline; white-space: pre-wrap; word-wrap: break-word; }
.body_foreground { color: #AAAAAA; }
.body_background { background-color: #000000; }
.inv_foreground { color: #000000; }
.inv_background { background-color: #AAAAAA; }
.ansi1 { font-weight: bold; }
.ansi34 { color: #0000aa; }
</style>
</head>
<body class="body_foreground body_background" style="font-size: normal;" >
<pre class="ansi2html-content">
MVN_ARTIFACT(7)               Java Packages Tools              MVN_ARTIFACT(7)



<span class="ansi1">NAME</span>
       mvn_artifact - request installation of Maven artifact

<span class="ansi1">SYNOPSIS</span>
       <span class="ansi1">%mvn_artifact </span>[options] model [artifact-file]

       <span class="ansi1">%mvn_artifact </span>[options] artifact-coordinates artifact-file

<span class="ansi1">DESCRIPTION</span>
       <span class="ansi1">mvn_artifact </span>macro marks specified Maven artifact to be installed by
       further call to <span class="ansi1">mvn_install</span>. Multiple calls to <span class="ansi1">mvn_artifact </span>and/or
       <span class="ansi1">mvn_build </span>can be made to request installation of multiple artifacts.

<span class="ansi1">OPTIONS</span>
       <span class="ansi1">--skip-dependencies</span>
           Do not try to gather list of dependencies for given Maven artifact.

       <span class="ansi1">-Dproperty=value</span>
           Add artifact property

<span class="ansi1">OPERANDS</span>
       <span class="ansi1">model</span>
           Path to raw project object model (POM) file to be associated and
           installed with artifact.

       <span class="ansi1">artifact-file</span>
           Path to file to be used as artifact file. If omitted then no
           artifact file is installed.

       <span class="ansi1">artifact-coordinates</span>
           Artifact coordinates specify artifact to be installed. If specified
           then no model file is installed with artifact. Coordinates are in
           format <span class="ansi1">groupId:artifactId[:extension[:classifier]]:version</span>. If
           extension is omitted then "jar" is used. If classifier is omitted
           then empty classifier is used. For more information see XMvn
           Configuration Reference.

<span class="ansi1">AUTHOR</span>
       Written by Michal Srb.

<span class="ansi1">REPORTING BUGS</span>
       Bugs should be reported through Java Packages Tools issue tracker at
       Github: <span class="ansi34"></span><span class="ansi1 ansi34">https://github.com/fedora-java/javapackages/issues</span><span class="ansi1"></span>.

<span class="ansi1">SEE ALSO</span>
       <span class="ansi1">gradle_build</span>(7), <span class="ansi1">mvn_build</span>(7), <span class="ansi1">mvn_install</span>(7).



JAVAPACKAGES                      01/25/2023                   MVN_ARTIFACT(7)

</pre>
</body>

</html>
</div>
<div class="sect2">
<h3 id="_mvn_build">A.3. mvn_build</h3>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title></title>
<style type="text/css">
.ansi2html-content { display: inline; white-space: pre-wrap; word-wrap: break-word; }
.body_foreground { color: #AAAAAA; }
.body_background { background-color: #000000; }
.inv_foreground { color: #000000; }
.inv_background { background-color: #AAAAAA; }
.ansi1 { font-weight: bold; }
.ansi34 { color: #0000aa; }
</style>
</head>
<body class="body_foreground body_background" style="font-size: normal;" >
<pre class="ansi2html-content">
MVN_BUILD(7)                  Java Packages Tools                 MVN_BUILD(7)



<span class="ansi1">NAME</span>
       mvn_build - build Maven project with XMvn

<span class="ansi1">SYNOPSIS</span>
       <span class="ansi1">%mvn_build </span>[options] [-- Maven-arguments]

<span class="ansi1">DESCRIPTION</span>
       <span class="ansi1">mvn_build </span>macro builds Maven project by calling XMvn and generates
       reactor structure information to be used by <span class="ansi1">mvn_install</span>.

       By default Maven phase <span class="ansi1">verify </span>and goal <span class="ansi1">javadoc:aggregate </span>are executed,
       as well as some additional XMvn-specific goals or phases. If <span class="ansi1">-f </span>is
       specified then phase <span class="ansi1">package </span>is executed instead of <span class="ansi1">verify</span>. If <span class="ansi1">-j </span>is
       given then goal <span class="ansi1">javadoc:aggregate </span>is skipped.

       Any arguments after <span class="ansi1">-- </span>are passed directly to XMvn. See <span class="ansi1">xmvn(1) </span>for
       more information on availability of XMvn options.

<span class="ansi1">OPTIONS</span>
       <span class="ansi1">-d, --xmvn-debug</span>
           Enable XMvn debugging output. This option causes XMvn to write
           verbose debugging information to standard output. Debugging
           information includes at least details about artifact resolution
           from system repositories.

       <span class="ansi1">-f, --force</span>
           Skip compilation and execution of unit and integration tests, as
           well as resolution of build dependencies with scope <span class="ansi1">test</span>. This
           option causes Maven phase <span class="ansi1">package </span>to be executed instead of default
           phase <span class="ansi1">verify</span>, defines property <span class="ansi1">maven.test.skip=true </span>which disables
           compilation and execution of tests and causes XMvn to remove any
           project dependencies with scope <span class="ansi1">test</span>.

       <span class="ansi1">-i, --skip-install</span>
           Skip artifact installation. This option disables generation of
           reactor structure information so that future calls to <span class="ansi1">mvn_install</span>
           will not result in installation of artifacts produced in current
           Maven reactor.

       <span class="ansi1">-j, --skip-javadoc</span>
           Skip javadoc generation. This option skips running Maven Javadoc
           Plugin. Useful for packages which don’t want to produce Java API
           documentation.

       <span class="ansi1">-s, --singleton</span>
           Enable singleton packaging (one artifact per package). This option
           causes artifacts with identical <span class="ansi1">artifactId </span>to be installed as part
           of the same subpackage. This behavior can be further customized by
           adding more specific packaging rules with <span class="ansi1">mvn_package</span>.

       <span class="ansi1">-X, --debug</span>
           Enable Maven debugging output. Implies <span class="ansi1">-d</span>. This option causes Maven
           to write verbose debugging information to standard output.

<span class="ansi1">ENVIRONMENT</span>
       <span class="ansi1">xmvn_bootstrap</span>
           Run XMvn in online mode. If <span class="ansi1">xmvn_bootstrap </span>RPM macro is defined to
           any value then XMvn is ran in online mode. Otherwise XMvn is ran in
           offline mode. Online mode of XMvn allows missing dependency
           artifacts to be fetched from remote repositories. This behavior is
           mostly useful when bootstrapping new packages, which dependecies
           have not yet been packaged.

       <span class="ansi1">_without_tests</span>
           Defining this macro to any value is equivalent to <span class="ansi1">-f </span>option.

       <span class="ansi1">_without_javadoc</span>
           Defining this macro to any value is equivalent to <span class="ansi1">-j </span>option.

<span class="ansi1">AUTHOR</span>
       Originally written by Mikolaj Izdebski. Versions 3.0.0 and later were
       written by Stanislav Ochotnicky.

<span class="ansi1">REPORTING BUGS</span>
       Bugs should be reported through Java Packages Tools issue tracker at
       Github: <span class="ansi34"></span><span class="ansi1 ansi34">https://github.com/fedora-java/javapackages/issues</span><span class="ansi1"></span>.

<span class="ansi1">SEE ALSO</span>
       <span class="ansi1">mvn_alias</span>(7), <span class="ansi1">mvn_compat_version</span>(7), <span class="ansi1">mvn_config</span>(7), <span class="ansi1">mvn_file</span>(7),
       <span class="ansi1">mvn_package</span>(7), <span class="ansi1">xmvn</span>(1).



JAVAPACKAGES                      01/25/2023                      MVN_BUILD(7)

</pre>
</body>

</html>
</div>
<div class="sect2">
<h3 id="_mvn_compat_version">A.4. mvn_compat_version</h3>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title></title>
<style type="text/css">
.ansi2html-content { display: inline; white-space: pre-wrap; word-wrap: break-word; }
.body_foreground { color: #AAAAAA; }
.body_background { background-color: #000000; }
.inv_foreground { color: #000000; }
.inv_background { background-color: #AAAAAA; }
.ansi1 { font-weight: bold; }
.ansi34 { color: #0000aa; }
</style>
</head>
<body class="body_foreground body_background" style="font-size: normal;" >
<pre class="ansi2html-content">
MVN_COMPAT_VERSION(7)         Java Packages Tools        MVN_COMPAT_VERSION(7)



<span class="ansi1">NAME</span>
       mvn_compat_version - set version(s) for Maven artifact(s)

<span class="ansi1">SYNOPSIS</span>
       <span class="ansi1">%mvn_compat_version </span>artifact-coordinates version [version ...]

<span class="ansi1">DESCRIPTION</span>
       <span class="ansi1">mvn_compat_version </span>macro causes instructions for artifact installation
       to be added to XMvn reactor configuration. It is used to specify
       versions for Maven artifacts.

       Specified artifact coordinates must match at least one artifact. If not
       then behavior is unspecified. It is possible to specify artifact
       coordinates matching multiple artifacts, so one call to
       <span class="ansi1">mvn_compat_version </span>can affect installation of more than one artifact.

<span class="ansi1">OPERANDS</span>
       <span class="ansi1">artifact-coordinates</span>
           Artifact coordinates specify artifact(s) that this rule applies to.
           Coordinates are in format
           <span class="ansi1">groupId:artifactId[:extension[:classifier]][:version]</span>. If extension
           is specified then version must be specified too. If any part is
           omitted or equal to empty string then it matches any string.
           Wildcards and brace expansions are supported in each part. For more
           information see XMvn Configuration Reference.

       <span class="ansi1">version</span>
           Strings specifying artifact version. Backreferences are supported
           in form <span class="ansi1">@n</span>, where <span class="ansi1">n </span>is an integer corresponding to brace in
           <span class="ansi1">artifact-coordinates</span>.

<span class="ansi1">AUTHOR</span>
       Written by Stanislav Ochotnicky.

<span class="ansi1">REPORTING BUGS</span>
       Bugs should be reported through Java Packages Tools issue tracker at
       Github: <span class="ansi34"></span><span class="ansi1 ansi34">https://github.com/fedora-java/javapackages/issues</span><span class="ansi1"></span>.

<span class="ansi1">SEE ALSO</span>
       <span class="ansi1">gradle_build</span>(7), <span class="ansi1">mvn_alias</span>(7), <span class="ansi1">mvn_build</span>(7), <span class="ansi1">mvn_config</span>(7),
       <span class="ansi1">mvn_file</span>(7), <span class="ansi1">mvn_package</span>(7), <span class="ansi1">xmvn</span>(1).



JAVAPACKAGES                      01/25/2023             MVN_COMPAT_VERSION(7)

</pre>
</body>

</html>
</div>
<div class="sect2">
<h3 id="_mvn_config">A.5. mvn_config</h3>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title></title>
<style type="text/css">
.ansi2html-content { display: inline; white-space: pre-wrap; word-wrap: break-word; }
.body_foreground { color: #AAAAAA; }
.body_background { background-color: #000000; }
.inv_foreground { color: #000000; }
.inv_background { background-color: #AAAAAA; }
.ansi1 { font-weight: bold; }
.ansi4 { text-decoration: underline; }
.ansi34 { color: #0000aa; }
</style>
</head>
<body class="body_foreground body_background" style="font-size: normal;" >
<pre class="ansi2html-content">
MVN_CONFIG(7)                 Java Packages Tools                MVN_CONFIG(7)



<span class="ansi1">NAME</span>
       mvn_config - specify custom XMvn configuration option

<span class="ansi1">SYNOPSIS</span>
       <span class="ansi1">%mvn_config </span>key value

<span class="ansi1">DESCRIPTION</span>
       <span class="ansi1">mvn_config </span>macro causes custom configuration options to be added to
       XMvn reactor configuration.

<span class="ansi1">OPERANDS</span>
       <span class="ansi1">key</span>
           Configuration option key (unique name). This is XPath-like address
           of XML configuration node - list of XML nodes delimited by <span class="ansi4">/</span>. If
           unknown key is given, behavior is unspecified. For list of
           available keys see XMvn Configuration Reference.

       <span class="ansi1">value</span>
           Value of specified option. Must be either plain text or XML
           content. If value format is inappropriate for particular option,
           behavior is unspecified.

<span class="ansi1">AUTHOR</span>
       Originally written by Mikolaj Izdebski. Versions 3.0.0 and later were
       written by Stanislav Ochotnicky.

<span class="ansi1">REPORTING BUGS</span>
       Bugs should be reported through Java Packages Tools issue tracker at
       Github: <span class="ansi34"></span><span class="ansi1 ansi34">https://github.com/fedora-java/javapackages/issues</span><span class="ansi1"></span>.

<span class="ansi1">SEE ALSO</span>
       <span class="ansi1">gradle_build</span>(7), <span class="ansi1">mvn_alias</span>(7), <span class="ansi1">mvn_build</span>(7), <span class="ansi1">mvn_compat_version</span>(7),
       <span class="ansi1">mvn_file</span>(7), <span class="ansi1">mvn_package</span>(7), <span class="ansi1">xmvn</span>(1).



JAVAPACKAGES                      01/25/2023                     MVN_CONFIG(7)

</pre>
</body>

</html>
</div>
<div class="sect2">
<h3 id="_mvn_file">A.6. mvn_file</h3>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title></title>
<style type="text/css">
.ansi2html-content { display: inline; white-space: pre-wrap; word-wrap: break-word; }
.body_foreground { color: #AAAAAA; }
.body_background { background-color: #000000; }
.inv_foreground { color: #000000; }
.inv_background { background-color: #AAAAAA; }
.ansi1 { font-weight: bold; }
.ansi34 { color: #0000aa; }
</style>
</head>
<body class="body_foreground body_background" style="font-size: normal;" >
<pre class="ansi2html-content">
MVN_FILE(7)                   Java Packages Tools                  MVN_FILE(7)



<span class="ansi1">NAME</span>
       mvn_file - set installation location(s) for Maven artifact(s)

<span class="ansi1">SYNOPSIS</span>
       <span class="ansi1">%mvn_file </span>artifact-coordinates primary-file [secondary-file ...]

<span class="ansi1">DESCRIPTION</span>
       <span class="ansi1">mvn_file </span>macro causes instructions for artifact installation to be
       added to XMvn reactor configuration. It is used to control locations of
       artifact files in file system. (The exact meaning of artifact location
       is dependant on particular implementation of XMvn repository into which
       artifacts will be installed.)

       Specified artifact coordinates must match at least one artifact. If not
       then behavior is unspecified. It is possible to specify artifact
       coordinates matching multiple artifacts, so one call to <span class="ansi1">mvn_file </span>can
       affect installation of more than one artifact.

<span class="ansi1">OPERANDS</span>
       <span class="ansi1">artifact-coordinates</span>
           Artifact coordinates specify artifact(s) that this rule applies to.
           Coordinates are in format
           <span class="ansi1">groupId:artifactId[:extension[:classifier]][:version]</span>. If extension
           is specified then version must be specified too. If any part is
           omitted or equal to empty string then it matches any string.
           Wildcards and brace expansions are supported in each part. For more
           information see XMvn Configuration Reference.

       <span class="ansi1">primary-file</span>
           Primary location of artifact file. This operand is passed directly
           to XMvn installer. Its exact meaning is specific to particular
           repository implementation used to install given artifact.
           Backreferences are supported in form <span class="ansi1">@n</span>, where <span class="ansi1">n </span>is an integer
           corresponding to brace in <span class="ansi1">artifact-coordinates</span>.

       <span class="ansi1">secondary-file</span>
           Secondary location of artifact file. There can be any number (zero
           or more) of secondary artifact files. These operands are passed
           directly to XMvn installer. Their exact meaning is specific to
           particular repository implementation used to install given
           artifact. Backreferences are supported in form <span class="ansi1">@n</span>, where <span class="ansi1">n </span>is an
           integer corresponding to brace in <span class="ansi1">artifact-coordinates</span>.

<span class="ansi1">AUTHOR</span>
       Originally written by Mikolaj Izdebski. Versions 3.0.0 and later were
       written by Stanislav Ochotnicky.

<span class="ansi1">REPORTING BUGS</span>
       Bugs should be reported through Java Packages Tools issue tracker at
       Github: <span class="ansi34"></span><span class="ansi1 ansi34">https://github.com/fedora-java/javapackages/issues</span><span class="ansi1"></span>.

<span class="ansi1">SEE ALSO</span>
       <span class="ansi1">gradle_build</span>(7), <span class="ansi1">mvn_alias</span>(7), <span class="ansi1">mvn_build</span>(7), <span class="ansi1">mvn_compat_version</span>(7),
       <span class="ansi1">mvn_config</span>(7), <span class="ansi1">mvn_package</span>(7), <span class="ansi1">xmvn</span>(1).



JAVAPACKAGES                      01/25/2023                       MVN_FILE(7)

</pre>
</body>

</html>
</div>
<div class="sect2">
<h3 id="_mvn_install">A.7. mvn_install</h3>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title></title>
<style type="text/css">
.ansi2html-content { display: inline; white-space: pre-wrap; word-wrap: break-word; }
.body_foreground { color: #AAAAAA; }
.body_background { background-color: #000000; }
.inv_foreground { color: #000000; }
.inv_background { background-color: #AAAAAA; }
.ansi1 { font-weight: bold; }
.ansi34 { color: #0000aa; }
</style>
</head>
<body class="body_foreground body_background" style="font-size: normal;" >
<pre class="ansi2html-content">
MVN_INSTALL(7)                Java Packages Tools               MVN_INSTALL(7)



<span class="ansi1">NAME</span>
       mvn_install - install Maven artifacts

<span class="ansi1">SYNOPSIS</span>
       <span class="ansi1">%mvn_install </span>[-X] [-J directory]

<span class="ansi1">DESCRIPTION</span>
       <span class="ansi1">mvn_install </span>macro installs Maven artifacts into <span class="ansi1">%buildroot</span>.

       Specification of artifacts to be installed is taken from <span class="ansi1">.xmvn-reactor</span>
       file. This file can be populated using <span class="ansi1">mvn_build </span>and/or <span class="ansi1">mvn_artifact</span>
       macros.

       Specification how artifacts should be installed is taken from installer
       settings section in XMvn configuration. See XMvn Configuration
       Reference for more information. Macros <span class="ansi1">mvn_alias</span>(7), <span class="ansi1">mvn_build</span>(7),
       <span class="ansi1">mvn_compat_version</span>(7), <span class="ansi1">mvn_config</span>(7), <span class="ansi1">mvn_file</span>(7) and <span class="ansi1">mvn_package</span>(7)
       are capable of writing configuration that can affect behavior of
       <span class="ansi1">mvn_install</span>.

<span class="ansi1">OPTIONS</span>
       <span class="ansi1">-X</span>
           Enable debugging output. This option causes XMvn installer to write
           verbose debugging information to standard output.

       <span class="ansi1">-J </span>directory
           Specify alternative API documentation directory. By default API
           documentation is searched for in <span class="ansi1">target/site/apidocs </span>directory. The
           <span class="ansi1">-J </span>option allows to override this default location.

<span class="ansi1">AUTHOR</span>
       Written by Mikolaj Izdebski.

<span class="ansi1">REPORTING BUGS</span>
       Bugs should be reported through Java Packages Tools issue tracker at
       Github: <span class="ansi34"></span><span class="ansi1 ansi34">https://github.com/fedora-java/javapackages/issues</span><span class="ansi1"></span>.

<span class="ansi1">SEE ALSO</span>
       <span class="ansi1">gradle_build</span>(7), <span class="ansi1">mvn_alias</span>(7), <span class="ansi1">mvn_artifact</span>(7), <span class="ansi1">mvn_build</span>(7),
       <span class="ansi1">mvn_compat_version</span>(7), <span class="ansi1">mvn_config</span>(7), <span class="ansi1">mvn_file</span>(7), <span class="ansi1">mvn_package</span>(7),
       <span class="ansi1">xmvn</span>(1).



JAVAPACKAGES                      01/25/2023                    MVN_INSTALL(7)

</pre>
</body>

</html>
</div>
<div class="sect2">
<h3 id="_mvn_package">A.8. mvn_package</h3>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title></title>
<style type="text/css">
.ansi2html-content { display: inline; white-space: pre-wrap; word-wrap: break-word; }
.body_foreground { color: #AAAAAA; }
.body_background { background-color: #000000; }
.inv_foreground { color: #000000; }
.inv_background { background-color: #AAAAAA; }
.ansi1 { font-weight: bold; }
.ansi4 { text-decoration: underline; }
.ansi34 { color: #0000aa; }
</style>
</head>
<body class="body_foreground body_background" style="font-size: normal;" >
<pre class="ansi2html-content">
MVN_PACKAGE(7)                Java Packages Tools               MVN_PACKAGE(7)



<span class="ansi1">NAME</span>
       mvn_package - specify target package for Maven artifact(s)

<span class="ansi1">SYNOPSIS</span>
       <span class="ansi1">%mvn_package </span>artifact-coordinates [target-package]

<span class="ansi1">DESCRIPTION</span>
       <span class="ansi1">mvn_package </span>macro causes instructions for artifact installation to be
       added to XMvn reactor configuration. It is used to specify target
       package to which Maven artifacts should be installed.

       Specified artifact coordinates must match at least one artifact. If not
       then behavior is unspecified. It is possible to specify artifact
       coordinates matching multiple artifacts, so one call to <span class="ansi1">mvn_package </span>can
       affect installation of more than one artifact.

<span class="ansi1">OPERANDS</span>
       <span class="ansi1">artifact-coordinates</span>
           Artifact coordinates specify artifact(s) that this rule applies to.
           Coordinates are in format
           <span class="ansi1">groupId:artifactId[:extension[:classifier]][:version]</span>. If extension
           is specified then version must be specified too. If any part is
           omitted or equal to empty string then it matches any string.
           Wildcards and brace expansions are supported in each part. For more
           information see XMvn Configuration Reference.

       <span class="ansi1">target-package</span>
           Name of target (sub-)package to which matching artifacts will be
           installed. Backreferences are supported in form <span class="ansi1">@n</span>, where <span class="ansi1">n </span>is an
           integer corresponding to brace in <span class="ansi1">artifact-coordinates</span>. A special
           value of <span class="ansi4">noinstall</span> <span class="ansi1">means that matching artifact(s) should not be</span>
           <span class="ansi1">installed to any package. Special value of default </span>means that
           matching artifact(s) should be installed into main package. If
           target-package is omitted value of <span class="ansi1">__default </span>is assumed.

<span class="ansi1">AUTHOR</span>
       Originally written by Mikolaj Izdebski. Versions 3.0.0 and later were
       written by Stanislav Ochotnicky.

<span class="ansi1">REPORTING BUGS</span>
       Bugs should be reported through Java Packages Tools issue tracker at
       Github: <span class="ansi34"></span><span class="ansi1 ansi34">https://github.com/fedora-java/javapackages/issues</span><span class="ansi1"></span>.

<span class="ansi1">SEE ALSO</span>
       <span class="ansi1">gradle_build</span>(7), <span class="ansi1">mvn_alias</span>(7), <span class="ansi1">mvn_build</span>(7), <span class="ansi1">mvn_compat_version</span>(7),
       <span class="ansi1">mvn_config</span>(7), <span class="ansi1">mvn_file</span>(7), <span class="ansi1">xmvn</span>(1).



JAVAPACKAGES                      01/25/2023                    MVN_PACKAGE(7)

</pre>
</body>

</html>
</div>
<div class="sect2">
<h3 id="_pom_add_dep">A.9. pom_add_dep</h3>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title></title>
<style type="text/css">
.ansi2html-content { display: inline; white-space: pre-wrap; word-wrap: break-word; }
.body_foreground { color: #AAAAAA; }
.body_background { background-color: #000000; }
.inv_foreground { color: #000000; }
.inv_background { background-color: #AAAAAA; }
.ansi1 { font-weight: bold; }
.ansi34 { color: #0000aa; }
</style>
</head>
<body class="body_foreground body_background" style="font-size: normal;" >
<pre class="ansi2html-content">
POM_ADD_DEP(7)                Java Packages Tools               POM_ADD_DEP(7)



<span class="ansi1">NAME</span>
       pom_add_dep - add dependency to Maven POM file or Ivy module

<span class="ansi1">SYNOPSIS</span>
       <span class="ansi1">%pom_add_dep </span>groupId<span class="ansi1">:</span>artifactId[<span class="ansi1">:</span>version[<span class="ansi1">:</span>scope]] [POM-location]...
       [extra-XML]

       <span class="ansi1">%pom_add_dep </span>org<span class="ansi1">:</span>name[<span class="ansi1">:</span>rev[<span class="ansi1">:</span>conf[<span class="ansi1">:</span>transitive]]]
       [Ivy-module-location]... [extra-XML]

       <span class="ansi1">%pom_add_dep_mgmt </span>groupId<span class="ansi1">:</span>articId[<span class="ansi1">:</span>version[<span class="ansi1">:</span>scope]] [POM-location]...
       [extra-XML]

<span class="ansi1">DESCRIPTION</span>
       These macros patch specified POM or Ivy file adding a dependency on
       given Maven artifact specified by artifact coordinates. <span class="ansi1">pom_add_dep</span>
       adds the dependency to <span class="ansi1">&lt;dependencies&gt; </span>XML node, while <span class="ansi1">pom_add_dep_mgmt</span>
       adds it to <span class="ansi1">&lt;dependencyManagement&gt;</span>.

       groupId and artifactId are identifiers of Maven artifact on which
       dependency is to be added. They must be specified. If version is not
       specified then default value of <span class="ansi1">"any" </span>is used. If scope is not
       specified then no scope is defined (Maven defaults to "compile" in this
       case).

       When modifying Ivy modules, the org, name and rev correspond to the
       Maven groupId and artifactId and version. Org and name must be
       specified, other attributes use defaults. The conf attribute specifies
       the configuration in which the dependency should apply. The transitive
       attribute specifies whether the dependency should also pull in it’s
       dependencies. It accepts boolean values - true or false. When
       unspecified Ivy defaults to true.

       POM location can be either a full path to the POM or Ivy file, or a
       path to the directory containing <span class="ansi1">pom.xml </span>or <span class="ansi1">ivy.xml</span>. If POM location is
       not given then <span class="ansi1">pom.xml </span>or <span class="ansi1">ivy.xml </span>from current working directory is
       used. When both <span class="ansi1">pom.xml </span>and <span class="ansi1">ivy.xml </span>are present, <span class="ansi1">pom.xml </span>is processed.
       You can specify more file locations which will be processed.

       Extra XML is additional XML code to be added into the <span class="ansi1">&lt;dependency&gt;</span>
       node. This parameter can be ommited, in which case no extra XML is
       appended.

<span class="ansi1">EXAMPLES</span>
       <span class="ansi1">%pom_add_dep foo:bar baz </span>- this call adds dependency on artifact
       <span class="ansi1">foo:bar </span>to <span class="ansi1">baz/pom.xml </span>file.

<span class="ansi1">AUTHOR</span>
       Written by Mikolaj Izdebski.

<span class="ansi1">REPORTING BUGS</span>
       Bugs should be reported through Java Packages Tools issue tracker at
       Github: <span class="ansi34"></span><span class="ansi1 ansi34">https://github.com/fedora-java/javapackages/issues</span><span class="ansi1"></span>.

<span class="ansi1">SEE ALSO</span>
       <span class="ansi1">pom_add_parent</span>(7), <span class="ansi1">pom_add_plugin</span>(7), <span class="ansi1">pom_disable_module</span>(7),
       <span class="ansi1">pom_remove_dep</span>(7), <span class="ansi1">pom_remove_parent</span>(7), <span class="ansi1">pom_remove_plugin</span>(7),
       <span class="ansi1">pom_change_dep</span>(7), <span class="ansi1">pom_set_parent</span>(7), <span class="ansi1">pom_xpath_inject</span>(7),
       <span class="ansi1">pom_xpath_remove</span>(7), <span class="ansi1">pom_xpath_replace</span>(7), <span class="ansi1">pom_xpath_set</span>(7).



JAVAPACKAGES                      01/25/2023                    POM_ADD_DEP(7)

</pre>
</body>

</html>
</div>
<div class="sect2">
<h3 id="_pom_add_parent">A.10. pom_add_parent</h3>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title></title>
<style type="text/css">
.ansi2html-content { display: inline; white-space: pre-wrap; word-wrap: break-word; }
.body_foreground { color: #AAAAAA; }
.body_background { background-color: #000000; }
.inv_foreground { color: #000000; }
.inv_background { background-color: #AAAAAA; }
.ansi1 { font-weight: bold; }
.ansi34 { color: #0000aa; }
</style>
</head>
<body class="body_foreground body_background" style="font-size: normal;" >
<pre class="ansi2html-content">
POM_ADD_PARENT(7)             Java Packages Tools            POM_ADD_PARENT(7)



<span class="ansi1">NAME</span>
       pom_add_parent - add parent POM reference to POM file

<span class="ansi1">SYNOPSIS</span>
       <span class="ansi1">%pom_add_parent </span>groupId<span class="ansi1">:</span>artifactId[<span class="ansi1">:</span>version] [POM-location]...

<span class="ansi1">DESCRIPTION</span>
       This macro patches specified POM file adding a reference to parent POM
       with specified groupId, artifactId and version.

       groupId and artifactId are identifiers of Maven group and artifact of
       the POM to be referenced as parent POM. They must be specified. If
       version is not specified then default value of "any" is used.

       POM location can be either a full path to the POM file, or a path to
       the directory containing <span class="ansi1">pom.xml</span>. If POM location is not given then
       <span class="ansi1">pom.xml </span>from current working directory is used. You can specify more
       file locations which will be processed.

<span class="ansi1">EXAMPLES</span>
       <span class="ansi1">%pom_add_parent foo:bar baz </span>- this call adds reference to parent POM
       artifact <span class="ansi1">foo:bar </span>to <span class="ansi1">baz/pom.xml </span>file.

<span class="ansi1">AUTHOR</span>
       Written by Mikolaj Izdebski.

<span class="ansi1">REPORTING BUGS</span>
       Bugs should be reported through Java Packages Tools issue tracker at
       Github: <span class="ansi34"></span><span class="ansi1 ansi34">https://github.com/fedora-java/javapackages/issues</span><span class="ansi1"></span>.

<span class="ansi1">SEE ALSO</span>
       <span class="ansi1">pom_add_dep</span>(7), <span class="ansi1">pom_add_plugin</span>(7), <span class="ansi1">pom_disable_module</span>(7),
       <span class="ansi1">pom_remove_dep</span>(7), <span class="ansi1">pom_remove_parent</span>(7), <span class="ansi1">pom_remove_plugin</span>(7),
       <span class="ansi1">pom_change_dep</span>(7), <span class="ansi1">pom_set_parent</span>(7), <span class="ansi1">pom_xpath_inject</span>(7),
       <span class="ansi1">pom_xpath_remove</span>(7), <span class="ansi1">pom_xpath_replace</span>(7), <span class="ansi1">pom_xpath_set</span>(7).



JAVAPACKAGES                      01/25/2023                 POM_ADD_PARENT(7)

</pre>
</body>

</html>
</div>
<div class="sect2">
<h3 id="_pom_add_plugin">A.11. pom_add_plugin</h3>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title></title>
<style type="text/css">
.ansi2html-content { display: inline; white-space: pre-wrap; word-wrap: break-word; }
.body_foreground { color: #AAAAAA; }
.body_background { background-color: #000000; }
.inv_foreground { color: #000000; }
.inv_background { background-color: #AAAAAA; }
.ansi1 { font-weight: bold; }
.ansi34 { color: #0000aa; }
</style>
</head>
<body class="body_foreground body_background" style="font-size: normal;" >
<pre class="ansi2html-content">
POM_ADD_PLUGIN(7)             Java Packages Tools            POM_ADD_PLUGIN(7)



<span class="ansi1">NAME</span>
       pom_add_plugin - add plugin invocation to POM file

<span class="ansi1">SYNOPSIS</span>
       <span class="ansi1">%pom_add_plugin </span>groupId<span class="ansi1">:</span>artifactId[<span class="ansi1">:</span>version] [POM-location]...
       [extra-XML]

<span class="ansi1">DESCRIPTION</span>
       This macro patches specified POM file adding plugin invocation of given
       groupId and artifactId.

       groupId and artifactId are identifiers of Maven plugin artifact of
       which invocation is to be added. groupId may be ommited, in which case
       value of "org.apache.maven.plugins" is used as default. artifactId must
       be specified. If version is not specified then default value of "any"
       is used.

       POM location can be either a full path to the POM file, or a path to
       the directory containing <span class="ansi1">pom.xml</span>. If POM location is not given then
       <span class="ansi1">pom.xml </span>from current working directory is used. You can specify more
       file locations which will be processed.

       Extra XML is additional XML code to be added into the <span class="ansi1">&lt;plugin&gt; </span>node.
       This parameter can be ommited, in which case no extra XML is appended.

<span class="ansi1">EXAMPLES</span>
       <span class="ansi1">%pom_add_plugin com.example:plugin foo </span>- this call adds invocation of
       plugin <span class="ansi1">com.example:plugin </span>to <span class="ansi1">foo/pom.xml</span>.

       <span class="ansi1">%pom_add_plugin :maven-compiler-plugin . "&lt;target&gt;1.5&lt;/target&gt;" </span>- this
       call adds invocation of Maven Compiler Plugin with target configured to
       1.5.

<span class="ansi1">AUTHOR</span>
       Written by Mikolaj Izdebski.

<span class="ansi1">REPORTING BUGS</span>
       Bugs should be reported through Java Packages Tools issue tracker at
       Github: <span class="ansi34"></span><span class="ansi1 ansi34">https://github.com/fedora-java/javapackages/issues</span><span class="ansi1"></span>.

<span class="ansi1">SEE ALSO</span>
       <span class="ansi1">pom_add_dep</span>(7), <span class="ansi1">pom_add_parent</span>(7), <span class="ansi1">pom_disable_module</span>(7),
       <span class="ansi1">pom_remove_dep</span>(7), <span class="ansi1">pom_remove_parent</span>(7), <span class="ansi1">pom_remove_plugin</span>(7),
       <span class="ansi1">pom_set_parent</span>(7), <span class="ansi1">pom_xpath_inject</span>(7), <span class="ansi1">pom_xpath_remove</span>(7),
       <span class="ansi1">pom_xpath_replace</span>(7), <span class="ansi1">pom_xpath_set</span>(7).



JAVAPACKAGES                      01/25/2023                 POM_ADD_PLUGIN(7)

</pre>
</body>

</html>
</div>
<div class="sect2">
<h3 id="_pom_change_dep">A.12. pom_change_dep</h3>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title></title>
<style type="text/css">
.ansi2html-content { display: inline; white-space: pre-wrap; word-wrap: break-word; }
.body_foreground { color: #AAAAAA; }
.body_background { background-color: #000000; }
.inv_foreground { color: #000000; }
.inv_background { background-color: #AAAAAA; }
.ansi1 { font-weight: bold; }
.ansi34 { color: #0000aa; }
</style>
</head>
<body class="body_foreground body_background" style="font-size: normal;" >
<pre class="ansi2html-content">
POM_CHANGE_DEP(7)             Java Packages Tools            POM_CHANGE_DEP(7)



<span class="ansi1">NAME</span>
       pom_change_dep - change dependency in Maven POM file or Ivy module

<span class="ansi1">SYNOPSIS</span>
       <span class="ansi1">%pom_change_dep </span>[OPTIONS] SOURCE_ARTIFACT CHANGED_ARTIFACT
       [POM-location]... [extra-XML]

       <span class="ansi1">%pom_change_dep </span>[OPTIONS] SOURCE_ARTIFACT CHANGED_ARTIFACT
       [Ivy-module-location]... [extra-XML]

<span class="ansi1">OPTIONS</span>
       <span class="ansi1">-r</span>
           Work in recursive mode. That means that given dependency is also
           changed in all enabled submodules of given POM file(s). Has no
           effect if the file is not Maven POM.

       <span class="ansi1">-f</span>
           Do not throw an error when one of the specified files doesn’t
           contain given dependency.

<span class="ansi1">DESCRIPTION</span>
       These macros patch specified POM or Ivy file changing a dependency on
       given Maven artifact specified by artifact coordinates to artifact
       specified by second set of Maven coordinates. The artifact
       specification has same format as <span class="ansi1">%pom_add_dep</span>. The omitted or empty
       parts in second artifact specification cause the original value to be
       left unmodified. Supplying a special value of <span class="ansi1">- </span>for given part causes
       that part of artifact specification to be deleted.

       POM location can be either a full path to the POM or Ivy file, or a
       path to the directory containing <span class="ansi1">pom.xml </span>or <span class="ansi1">ivy.xml</span>. If POM location is
       not given then <span class="ansi1">pom.xml </span>or <span class="ansi1">ivy.xml </span>from current working directory is
       used. When both <span class="ansi1">pom.xml </span>and <span class="ansi1">ivy.xml </span>are present, <span class="ansi1">pom.xml </span>is processed.
       You can specify more file locations which will be processed.

       Extra XML is additional XML code to be added into the <span class="ansi1">&lt;dependency&gt;</span>
       node. This parameter can be ommited, in which case no extra XML is
       appended.

<span class="ansi1">EXAMPLES</span>
       <span class="ansi1">pom_change_dep foo: com.example.foo: </span>- this call changes groupId of all
       dependencies which have groupId foo to com.example.foo. Their
       artifactId, versions and other possible parts are left unmodified.

<span class="ansi1">AUTHOR</span>
       Written by Michael Simacek.

<span class="ansi1">REPORTING BUGS</span>
       Bugs should be reported through Java Packages Tools issue tracker at
       Github: <span class="ansi34"></span><span class="ansi1 ansi34">https://github.com/fedora-java/javapackages/issues</span><span class="ansi1"></span>.

<span class="ansi1">SEE ALSO</span>
       <span class="ansi1">pom_add_dep</span>(7), <span class="ansi1">pom_add_parent</span>(7), <span class="ansi1">pom_add_plugin</span>(7),
       <span class="ansi1">pom_disable_module</span>(7), <span class="ansi1">pom_remove_dep</span>(7), <span class="ansi1">pom_remove_parent</span>(7),
       <span class="ansi1">pom_remove_plugin</span>(7), <span class="ansi1">pom_set_parent</span>(7), <span class="ansi1">pom_xpath_inject</span>(7),
       <span class="ansi1">pom_xpath_remove</span>(7), <span class="ansi1">pom_xpath_replace</span>(7), <span class="ansi1">pom_xpath_set</span>(7).



JAVAPACKAGES                      01/25/2023                 POM_CHANGE_DEP(7)

</pre>
</body>

</html>
</div>
<div class="sect2">
<h3 id="_pom_disable_module">A.13. pom_disable_module</h3>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title></title>
<style type="text/css">
.ansi2html-content { display: inline; white-space: pre-wrap; word-wrap: break-word; }
.body_foreground { color: #AAAAAA; }
.body_background { background-color: #000000; }
.inv_foreground { color: #000000; }
.inv_background { background-color: #AAAAAA; }
.ansi1 { font-weight: bold; }
.ansi34 { color: #0000aa; }
</style>
</head>
<body class="body_foreground body_background" style="font-size: normal;" >
<pre class="ansi2html-content">
POM_DISABLE_MODULE(7)         Java Packages Tools        POM_DISABLE_MODULE(7)



<span class="ansi1">NAME</span>
       pom_disable_module - disable given project module in POM file

<span class="ansi1">SYNOPSIS</span>
       <span class="ansi1">%pom_disable_module </span>module-name [POM-location]...

<span class="ansi1">DESCRIPTION</span>
       This macro patches specified POM file not to contain reference to given
       project module.

       Module name is the exact name of the module to be disabled. It must not
       be ommited.

       POM location can be either a full path to the POM file, or a path to
       the directory containing <span class="ansi1">pom.xml</span>. If POM location is not given then
       <span class="ansi1">pom.xml </span>from current working directory is used. You can specify more
       file locations which will be processed.

<span class="ansi1">EXAMPLES</span>
       <span class="ansi1">%pom_disable_module nonfree </span>- this call removes aggregated module
       <span class="ansi1">nonfree </span>from POM file in current working directory.

<span class="ansi1">AUTHOR</span>
       Written by Mikolaj Izdebski.

<span class="ansi1">REPORTING BUGS</span>
       Bugs should be reported through Java Packages Tools issue tracker at
       Github: <span class="ansi34"></span><span class="ansi1 ansi34">https://github.com/fedora-java/javapackages/issues</span><span class="ansi1"></span>.

<span class="ansi1">SEE ALSO</span>
       <span class="ansi1">pom_add_dep</span>(7), <span class="ansi1">pom_add_parent</span>(7), <span class="ansi1">pom_add_plugin</span>(7),
       <span class="ansi1">pom_remove_dep</span>(7), <span class="ansi1">pom_remove_parent</span>(7), <span class="ansi1">pom_remove_plugin</span>(7),
       <span class="ansi1">pom_change_dep</span>(7), <span class="ansi1">pom_set_parent</span>(7), <span class="ansi1">pom_xpath_inject</span>(7),
       <span class="ansi1">pom_xpath_remove</span>(7), <span class="ansi1">pom_xpath_replace</span>(7), <span class="ansi1">pom_xpath_set</span>(7).



JAVAPACKAGES                      01/25/2023             POM_DISABLE_MODULE(7)

</pre>
</body>

</html>
</div>
<div class="sect2">
<h3 id="_pom_remove_dep">A.14. pom_remove_dep</h3>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title></title>
<style type="text/css">
.ansi2html-content { display: inline; white-space: pre-wrap; word-wrap: break-word; }
.body_foreground { color: #AAAAAA; }
.body_background { background-color: #000000; }
.inv_foreground { color: #000000; }
.inv_background { background-color: #AAAAAA; }
.ansi1 { font-weight: bold; }
.ansi34 { color: #0000aa; }
</style>
</head>
<body class="body_foreground body_background" style="font-size: normal;" >
<pre class="ansi2html-content">
POM_REMOVE_DEP(7)             Java Packages Tools            POM_REMOVE_DEP(7)



<span class="ansi1">NAME</span>
       pom_remove_dep - remove dependency on Maven artifact from POM file

<span class="ansi1">SYNOPSIS</span>
       <span class="ansi1">%pom_remove_dep </span>[OPTIONS] [groupId]<span class="ansi1">:</span>[artifactId][<span class="ansi1">:</span>version[<span class="ansi1">:</span>scope]]
       [POM-location]...

       <span class="ansi1">%pom_remove_dep </span>[OPTIONS] [org]<span class="ansi1">:</span>[name][<span class="ansi1">:</span>rev[<span class="ansi1">:</span>conf[<span class="ansi1">:</span>transitive]]]
       [Ivy-module-location]...

<span class="ansi1">OPTIONS</span>
       <span class="ansi1">-r</span>
           Work in recursive mode. That means that dependency is also removed
           from all enabled submodules of given POM file(s).

       <span class="ansi1">-f</span>
           Do not throw an error when one of the specified files doesn’t
           contain given dependency.

<span class="ansi1">DESCRIPTION</span>
       This macro patches specified POM file not to contain dependencies on
       given Maven artifact.

       groupId and artifactId are identifiers of Maven group and artifact of
       the module on which dependency is to be removed. If they are ommited
       then all identifiers are matched.

       When modifying Ivy modules, the org and name correspond to the Maven
       groupId and artifactId.

       POM location can be either a full path to the POM or Ivy file, or a
       path to the directory containing <span class="ansi1">pom.xml </span>or <span class="ansi1">ivy.xml</span>. If POM location is
       not given then <span class="ansi1">pom.xml </span>or <span class="ansi1">ivy.xml </span>from current working directory is
       used. When both <span class="ansi1">pom.xml </span>and <span class="ansi1">ivy.xml </span>are present, <span class="ansi1">pom.xml </span>is processed.
       You can specify more file locations. If the dependency is not found in
       all of given files, the command raises an error. This can be overriden
       with the -f option.

<span class="ansi1">EXAMPLES</span>
       <span class="ansi1">%pom_remove_dep com.example: </span>- this call removes dependency on all
       artifacts with groupId <span class="ansi1">com.example </span>from POM in current working
       directory.

       <span class="ansi1">%pom_remove_dep boo:bar target/location </span>- this call removes dependency
       on artifacts with groupId <span class="ansi1">foo </span>and artifactId <span class="ansi1">bar </span>from
       <span class="ansi1">target/location/pom.xml</span>.

<span class="ansi1">AUTHOR</span>
       Written by Mikolaj Izdebski.

<span class="ansi1">REPORTING BUGS</span>
       Bugs should be reported through Java Packages Tools issue tracker at
       Github: <span class="ansi34"></span><span class="ansi1 ansi34">https://github.com/fedora-java/javapackages/issues</span><span class="ansi1"></span>.

<span class="ansi1">SEE ALSO</span>
       <span class="ansi1">pom_add_dep</span>(7), <span class="ansi1">pom_add_parent</span>(7), <span class="ansi1">pom_add_plugin</span>(7),
       <span class="ansi1">pom_disable_module</span>(7), <span class="ansi1">pom_remove_parent</span>(7), <span class="ansi1">pom_remove_plugin</span>(7),
       <span class="ansi1">pom_change_dep</span>(7), <span class="ansi1">pom_set_parent</span>(7), <span class="ansi1">pom_xpath_inject</span>(7),
       <span class="ansi1">pom_xpath_remove</span>(7), <span class="ansi1">pom_xpath_replace</span>(7), <span class="ansi1">pom_xpath_set</span>(7).



JAVAPACKAGES                      01/25/2023                 POM_REMOVE_DEP(7)

</pre>
</body>

</html>
</div>
<div class="sect2">
<h3 id="_pom_remove_parent">A.15. pom_remove_parent</h3>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title></title>
<style type="text/css">
.ansi2html-content { display: inline; white-space: pre-wrap; word-wrap: break-word; }
.body_foreground { color: #AAAAAA; }
.body_background { background-color: #000000; }
.inv_foreground { color: #000000; }
.inv_background { background-color: #AAAAAA; }
.ansi1 { font-weight: bold; }
.ansi34 { color: #0000aa; }
</style>
</head>
<body class="body_foreground body_background" style="font-size: normal;" >
<pre class="ansi2html-content">
POM_REMOVE_PARENT(7)          Java Packages Tools         POM_REMOVE_PARENT(7)



<span class="ansi1">NAME</span>
       pom_remove_parent - remove parent POM reference from POM file

<span class="ansi1">SYNOPSIS</span>
       <span class="ansi1">%pom_remove_parent </span>[POM-location]...

<span class="ansi1">DESCRIPTION</span>
       This macro patches specified POM file removing reference to parent POM.

       POM location can be either a full path to the POM file, or a path to
       the directory containing <span class="ansi1">pom.xml</span>. If POM location is not given then
       <span class="ansi1">pom.xml </span>from current working directory is used. You can specify more
       file locations which will be processed.

<span class="ansi1">EXAMPLES</span>
       <span class="ansi1">%pom_remove_parent target/location </span>- this call removes parent POM
       reference from <span class="ansi1">target/location/pom.xml</span>.

<span class="ansi1">AUTHOR</span>
       Written by Mikolaj Izdebski.

<span class="ansi1">REPORTING BUGS</span>
       Bugs should be reported through Java Packages Tools issue tracker at
       Github: <span class="ansi34"></span><span class="ansi1 ansi34">https://github.com/fedora-java/javapackages/issues</span><span class="ansi1"></span>.

<span class="ansi1">SEE ALSO</span>
       <span class="ansi1">pom_add_dep</span>(7), <span class="ansi1">pom_add_parent</span>(7), <span class="ansi1">pom_add_plugin</span>(7),
       <span class="ansi1">pom_disable_module</span>(7), <span class="ansi1">pom_remove_dep</span>(7), <span class="ansi1">pom_remove_plugin</span>(7),
       <span class="ansi1">pom_change_dep</span>(7), <span class="ansi1">pom_set_parent</span>(7), <span class="ansi1">pom_xpath_inject</span>(7),
       <span class="ansi1">pom_xpath_remove</span>(7), <span class="ansi1">pom_xpath_replace</span>(7), <span class="ansi1">pom_xpath_set</span>(7).



JAVAPACKAGES                      01/25/2023              POM_REMOVE_PARENT(7)

</pre>
</body>

</html>
</div>
<div class="sect2">
<h3 id="_pom_remove_plugin">A.16. pom_remove_plugin</h3>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title></title>
<style type="text/css">
.ansi2html-content { display: inline; white-space: pre-wrap; word-wrap: break-word; }
.body_foreground { color: #AAAAAA; }
.body_background { background-color: #000000; }
.inv_foreground { color: #000000; }
.inv_background { background-color: #AAAAAA; }
.ansi1 { font-weight: bold; }
.ansi34 { color: #0000aa; }
</style>
</head>
<body class="body_foreground body_background" style="font-size: normal;" >
<pre class="ansi2html-content">
POM_REMOVE_PLUGIN(7)          Java Packages Tools         POM_REMOVE_PLUGIN(7)



<span class="ansi1">NAME</span>
       pom_remove_plugin - remove Maven plugin invocation from POM file

<span class="ansi1">SYNOPSIS</span>
       <span class="ansi1">%pom_remove_plugin </span>[OPTIONS] [groupId]<span class="ansi1">:</span>[artifactId][<span class="ansi1">:</span>version[<span class="ansi1">:</span>scope]]
       [POM-location]...

<span class="ansi1">OPTIONS</span>
       <span class="ansi1">-r</span>
           Work in recursive mode. That means that plugin is also removed from
           all enabled submodules of given POM file(s).

       <span class="ansi1">-f</span>
           Do not throw an error when one of the specified files doesn’t
           contain given dependency.

<span class="ansi1">DESCRIPTION</span>
       This macro patches specified POM file not to contain invocations of
       given Maven plugin.

       groupId and artifactId are identifiers of Maven group and artifact of
       the plugin which invocation is to be removed. If they are ommited then
       all identifiers are matched.

       POM location can be either a full path to the POM file, or a path to
       the directory containing <span class="ansi1">pom.xml</span>. If POM location is not given then
       <span class="ansi1">pom.xml </span>from current working directory is used. You can specify more
       file locations which will be processed. You can specify more file
       locations.

<span class="ansi1">EXAMPLES</span>
       <span class="ansi1">%pom_remove_plugin :maven-shade-plugin </span>- this call removes invocation
       of Maven Shade Plugin from POM in current working directory.

<span class="ansi1">AUTHOR</span>
       Written by Mikolaj Izdebski.

<span class="ansi1">REPORTING BUGS</span>
       Bugs should be reported through Java Packages Tools issue tracker at
       Github: <span class="ansi34"></span><span class="ansi1 ansi34">https://github.com/fedora-java/javapackages/issues</span><span class="ansi1"></span>.

<span class="ansi1">SEE ALSO</span>
       <span class="ansi1">pom_add_dep</span>(7), <span class="ansi1">pom_add_parent</span>(7), <span class="ansi1">pom_add_plugin</span>(7),
       <span class="ansi1">pom_disable_module</span>(7), <span class="ansi1">pom_remove_dep</span>(7), <span class="ansi1">pom_remove_parent</span>(7),
       <span class="ansi1">pom_change_dep</span>(7), <span class="ansi1">pom_set_parent</span>(7), <span class="ansi1">pom_xpath_inject</span>(7),
       <span class="ansi1">pom_xpath_remove</span>(7), <span class="ansi1">pom_xpath_replace</span>(7), <span class="ansi1">pom_xpath_set</span>(7).



JAVAPACKAGES                      01/25/2023              POM_REMOVE_PLUGIN(7)

</pre>
</body>

</html>
</div>
<div class="sect2">
<h3 id="_pom_set_parent">A.17. pom_set_parent</h3>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title></title>
<style type="text/css">
.ansi2html-content { display: inline; white-space: pre-wrap; word-wrap: break-word; }
.body_foreground { color: #AAAAAA; }
.body_background { background-color: #000000; }
.inv_foreground { color: #000000; }
.inv_background { background-color: #AAAAAA; }
.ansi1 { font-weight: bold; }
.ansi34 { color: #0000aa; }
</style>
</head>
<body class="body_foreground body_background" style="font-size: normal;" >
<pre class="ansi2html-content">
POM_SET_PARENT(7)             Java Packages Tools            POM_SET_PARENT(7)



<span class="ansi1">NAME</span>
       pom_set_parent - set parent POM reference in POM file

<span class="ansi1">SYNOPSIS</span>
       <span class="ansi1">%pom_set_parent </span>groupId<span class="ansi1">:</span>artifactId[<span class="ansi1">:</span>version] [POM-location]...

<span class="ansi1">DESCRIPTION</span>
       This macro patches specified POM file setting reference to parent POM
       to specified groupId, artifactId and version.

       This macros first removes parent POM reference and then adds a new one.
       It’s (more or less) equivalent to call to <span class="ansi1">%pom_remove_parent </span>followed
       by invocation of <span class="ansi1">%pom_add_parent</span>. See <span class="ansi1">pom_remove_parent</span>(7) and
       <span class="ansi1">pom_add_parent</span>(7) for more information about parameters.

       POM location can be either a full path to the POM file, or a path to
       the directory containing <span class="ansi1">pom.xml</span>. If POM location is not given then
       <span class="ansi1">pom.xml </span>from current working directory is used. You can specify more
       file locations which will be processed.

<span class="ansi1">EXAMPLES</span>
       <span class="ansi1">%pom_set_parent com.example:example-parent module </span>- this call sets
       parent POM of <span class="ansi1">module/pom.xml </span>to <span class="ansi1">com.example:example-parent</span>.

<span class="ansi1">AUTHOR</span>
       Written by Mikolaj Izdebski.

<span class="ansi1">REPORTING BUGS</span>
       Bugs should be reported through Java Packages Tools issue tracker at
       Github: <span class="ansi34"></span><span class="ansi1 ansi34">https://github.com/fedora-java/javapackages/issues</span><span class="ansi1"></span>.

<span class="ansi1">SEE ALSO</span>
       <span class="ansi1">pom_add_dep</span>(7), <span class="ansi1">pom_add_parent</span>(7), <span class="ansi1">pom_add_plugin</span>(7),
       <span class="ansi1">pom_disable_module</span>(7), <span class="ansi1">pom_remove_dep</span>(7), <span class="ansi1">pom_remove_parent</span>(7),
       <span class="ansi1">pom_remove_plugin</span>(7), <span class="ansi1">pom_change_dep</span>(7), <span class="ansi1">pom_xpath_inject</span>(7),
       <span class="ansi1">pom_xpath_remove</span>(7), <span class="ansi1">pom_xpath_replace</span>(7), <span class="ansi1">pom_xpath_set</span>(7).



JAVAPACKAGES                      01/25/2023                 POM_SET_PARENT(7)

</pre>
</body>

</html>
</div>
<div class="sect2">
<h3 id="_pom_xpath_disable">A.18. pom_xpath_disable</h3>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title></title>
<style type="text/css">
.ansi2html-content { display: inline; white-space: pre-wrap; word-wrap: break-word; }
.body_foreground { color: #AAAAAA; }
.body_background { background-color: #000000; }
.inv_foreground { color: #000000; }
.inv_background { background-color: #AAAAAA; }
.ansi1 { font-weight: bold; }
.ansi34 { color: #0000aa; }
</style>
</head>
<body class="body_foreground body_background" style="font-size: normal;" >
<pre class="ansi2html-content">
POM_XPATH_DISABLE(7)          Java Packages Tools         POM_XPATH_DISABLE(7)



<span class="ansi1">NAME</span>
       pom_xpath_disable - Disable all modules whose POM files satisfy given
       XPath condition

<span class="ansi1">SYNOPSIS</span>
       <span class="ansi1">%pom_xpath_disable </span>XPath-expression [POM-location]...

<span class="ansi1">DESCRIPTION</span>
       This macro recursively walks all enabled submodules of given POM and
       evaluates given XPath expression on them. If the expression returns a
       true value, matching submodule is disabled. Values considered true are
       defined by XPath specification as either true boolean value (i.e.
       returned by comparisons), non-empty node set, non-empty string or
       non-zero number.

       If the main module (specified by POM-location or pom.xml by default)
       also satisfies the condition, processing is aborted prior to making any
       changes and an error is raised. When none of the modules satisfy it, an
       error is also raised.

       POM location can be either a full path to the POM file, or a path to
       the directory containing <span class="ansi1">pom.xml</span>. If POM location is not given then
       <span class="ansi1">pom.xml </span>from current working directory is used. You can specify more
       file locations which will be processed.

<span class="ansi1">EXAMPLES</span>
       <span class="ansi1">%pom_xpath_disable "/pom:project/pom:classifier = 'test'" </span>- this call
       disables all modules with classifier <span class="ansi1">test</span>

       <span class="ansi1">%pom_xpath_disable /pom:project/pom:packaging </span>- this call disables all
       sumbodules that explicitly specify packaging

<span class="ansi1">AUTHOR</span>
       Written by Michael Simacek.

<span class="ansi1">REPORTING BUGS</span>
       Bugs should be reported through Java Packages Tools issue tracker at
       Github: <span class="ansi34"></span><span class="ansi1 ansi34">https://github.com/fedora-java/javapackages/issues</span><span class="ansi1"></span>.

<span class="ansi1">SEE ALSO</span>
       <span class="ansi1">pom_add_dep</span>(7), <span class="ansi1">pom_add_parent</span>(7), <span class="ansi1">pom_add_plugin</span>(7),
       <span class="ansi1">pom_remove_dep</span>(7), <span class="ansi1">pom_remove_parent</span>(7), <span class="ansi1">pom_remove_plugin</span>(7),
       <span class="ansi1">pom_change_dep</span>(7), <span class="ansi1">pom_set_parent</span>(7), <span class="ansi1">pom_xpath_inject</span>(7),
       <span class="ansi1">pom_xpath_remove</span>(7), <span class="ansi1">pom_xpath_replace</span>(7), <span class="ansi1">pom_xpath_set</span>(7).
       <span class="ansi1">pom_disable_module</span>(7).



JAVAPACKAGES                      01/25/2023              POM_XPATH_DISABLE(7)

</pre>
</body>

</html>
</div>
<div class="sect2">
<h3 id="_pom_xpath_inject">A.19. pom_xpath_inject</h3>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title></title>
<style type="text/css">
.ansi2html-content { display: inline; white-space: pre-wrap; word-wrap: break-word; }
.body_foreground { color: #AAAAAA; }
.body_background { background-color: #000000; }
.inv_foreground { color: #000000; }
.inv_background { background-color: #AAAAAA; }
.ansi1 { font-weight: bold; }
.ansi34 { color: #0000aa; }
</style>
</head>
<body class="body_foreground body_background" style="font-size: normal;" >
<pre class="ansi2html-content">
POM_XPATH_INJECT(7)           Java Packages Tools          POM_XPATH_INJECT(7)



<span class="ansi1">NAME</span>
       pom_xpath_inject - inject code into XML file

<span class="ansi1">SYNOPSIS</span>
       <span class="ansi1">%pom_xpath_inject </span>XPath XML-code [XML-file-location]...

<span class="ansi1">DESCRIPTION</span>
       This macro patches specified XML file appending given code as children
       of all XML nodes described by the XPath expression.

       XPath is an expression describing a set of XML nodes in the XML file to
       which child code is to be appended. It must be a properly formated
       XPath 1.0 expression, as described in <span class="ansi34"></span><span class="ansi1 ansi34">http://www.w3.org/TR/xpath/</span><span class="ansi1"></span>.

       Maven POM files use specific XML namespace
       http://maven.apache.org/POM/4.0.0 as default. This namespace needs to
       be explicitly specified in XPath expressions by prefixing all node
       names with pom: (i.e. pom:modelVersion).

       Many other XML formats also use namespaces which you have to explicitly
       specify. This script will use the namespace prefix names from the <span class="ansi1">xmlns</span>
       declarations in the document’s root element. So if the document begins
       with &lt;root xmlns:my="myurl.com"&gt; you would select the root node with
       XPath expression /my:root. If the document specifies a default
       namespace (e.g. xmlns="myurl.com") use the prefix named <span class="ansi1">default </span>to
       acces elements in that namespace.

       XML location can be either a full path to the XML, or a path to the
       directory containing <span class="ansi1">pom.xml </span>or <span class="ansi1">ivy.xml</span>. If XML location is not given
       then <span class="ansi1">pom.xml </span>or <span class="ansi1">ivy.xml </span>from current working directory is used. When
       both <span class="ansi1">pom.xml </span>and <span class="ansi1">ivy.xml </span>are present, <span class="ansi1">pom.xml </span>is processed. You can
       specify more file locations.

<span class="ansi1">EXAMPLES</span>
       <span class="ansi1">%pom_xpath_inject pom:project "&lt;packaging&gt;war&lt;/packaging&gt;" </span>- this call
       sets packaging of POM in current working directory to <span class="ansi1">war</span>.

       <span class="ansi1">%pom_xpath inject configurations '&lt;conf name="test"/&gt;' </span>- this adds a
       new configuration to the Ivy file in current working directory.

<span class="ansi1">AUTHOR</span>
       Written by Mikolaj Izdebski.

<span class="ansi1">REPORTING BUGS</span>
       Bugs should be reported through Java Packages Tools issue tracker at
       Github: <span class="ansi34"></span><span class="ansi1 ansi34">https://github.com/fedora-java/javapackages/issues</span><span class="ansi1"></span>.

<span class="ansi1">SEE ALSO</span>
       <span class="ansi1">pom_add_dep</span>(7), <span class="ansi1">pom_add_parent</span>(7), <span class="ansi1">pom_add_plugin</span>(7),
       <span class="ansi1">pom_disable_module</span>(7), <span class="ansi1">pom_remove_dep</span>(7), <span class="ansi1">pom_remove_parent</span>(7),
       <span class="ansi1">pom_remove_plugin</span>(7), <span class="ansi1">pom_change_dep</span>(7), <span class="ansi1">pom_set_parent</span>(7),
       <span class="ansi1">pom_xpath_remove</span>(7), <span class="ansi1">pom_xpath_replace</span>(7), <span class="ansi1">pom_xpath_set</span>(7).



JAVAPACKAGES                      01/25/2023               POM_XPATH_INJECT(7)

</pre>
</body>

</html>
</div>
<div class="sect2">
<h3 id="_pom_xpath_remove">A.20. pom_xpath_remove</h3>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title></title>
<style type="text/css">
.ansi2html-content { display: inline; white-space: pre-wrap; word-wrap: break-word; }
.body_foreground { color: #AAAAAA; }
.body_background { background-color: #000000; }
.inv_foreground { color: #000000; }
.inv_background { background-color: #AAAAAA; }
.ansi1 { font-weight: bold; }
.ansi34 { color: #0000aa; }
</style>
</head>
<body class="body_foreground body_background" style="font-size: normal;" >
<pre class="ansi2html-content">
POM_XPATH_REMOVE(7)           Java Packages Tools          POM_XPATH_REMOVE(7)



<span class="ansi1">NAME</span>
       pom_xpath_remove - remove a node from XML file

<span class="ansi1">SYNOPSIS</span>
       <span class="ansi1">%pom_xpath_remove </span>[OPTIONS] XPath [XML-file-location]...

<span class="ansi1">OPTIONS</span>
       <span class="ansi1">-r</span>
           Work in recursive mode. That means that given node is also removed
           from all enabled submodules of given POM file(s). Has no effect if
           the file is not Maven POM.

       <span class="ansi1">-f</span>
           Do not throw an error when one of the specified files doesn’t
           contain given node.

<span class="ansi1">DESCRIPTION</span>
       This macro patches specified POM file removing all XML nodes described
       by the XPath expression. This also works on attributes and text nodes.

       XPath is an expression describing a set of XML nodes to be removed from
       the POM file. It must be a properly formated XPath 1.0 expression, as
       described in <span class="ansi34"></span><span class="ansi1 ansi34">http://www.w3.org/TR/xpath/</span><span class="ansi1"></span>.

       Maven POM files use specific XML namespace
       http://maven.apache.org/POM/4.0.0 as default. This namespace needs to
       be explicitly specified in XPath expressions by prefixing all node
       names with <span class="ansi1">pom </span>(i.e. <span class="ansi1">pom:modelVersion</span>).

       Many other XML formats also use namespaces which you have to explicitly
       specify. This script will use the namespace prefix names from the <span class="ansi1">xmlns</span>
       declarations in the document’s root element. So if the document begins
       with &lt;root xmlns:my="myurl.com"&gt; you would select the root node with
       XPath expression <span class="ansi1">/my:root</span>. If the document specifies a default
       namespace (eg xmlns="myurl.com") use the prefix named <span class="ansi1">default </span>to acces
       elements in that namespace.

       XML location can be either a full path to the XML, or a path to the
       directory containing <span class="ansi1">pom.xml </span>or <span class="ansi1">ivy.xml</span>. If XML location is not given
       then <span class="ansi1">pom.xml </span>or <span class="ansi1">ivy.xml </span>from current working directory is used. When
       both <span class="ansi1">pom.xml </span>and <span class="ansi1">ivy.xml </span>are present, <span class="ansi1">pom.xml </span>is processed. You can
       specify more file locations.

<span class="ansi1">EXAMPLES</span>
       <span class="ansi1">%pom_xpath_remove pom:project/pom:reporting </span>- this call removes
       reporting section from POM in current working directory.

       <span class="ansi1">%pom_xpath_remove 'ivy:configure' build.xml </span>- this call disables
       loading of ivy configuration in build.xml file. Note the use of ivy
       namespace which was declared in the document as
       xmlns:ivy="antlib:org.apache.ivy.ant".

<span class="ansi1">AUTHOR</span>
       Written by Mikolaj Izdebski.

<span class="ansi1">REPORTING BUGS</span>
       Bugs should be reported through Java Packages Tools issue tracker at
       Github: <span class="ansi34"></span><span class="ansi1 ansi34">https://github.com/fedora-java/javapackages/issues</span><span class="ansi1"></span>.

<span class="ansi1">SEE ALSO</span>
       <span class="ansi1">pom_add_dep</span>(7), <span class="ansi1">pom_add_parent</span>(7), <span class="ansi1">pom_add_plugin</span>(7),
       <span class="ansi1">pom_disable_module</span>(7), <span class="ansi1">pom_remove_dep</span>(7), <span class="ansi1">pom_remove_parent</span>(7),
       <span class="ansi1">pom_remove_plugin</span>(7), <span class="ansi1">pom_change_dep</span>(7), <span class="ansi1">pom_set_parent</span>(7),
       <span class="ansi1">pom_xpath_inject</span>(7), <span class="ansi1">pom_xpath_replace</span>(7), <span class="ansi1">pom_xpath_set</span>(7).



JAVAPACKAGES                      01/25/2023               POM_XPATH_REMOVE(7)

</pre>
</body>

</html>
</div>
<div class="sect2">
<h3 id="_pom_xpath_replace">A.21. pom_xpath_replace</h3>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title></title>
<style type="text/css">
.ansi2html-content { display: inline; white-space: pre-wrap; word-wrap: break-word; }
.body_foreground { color: #AAAAAA; }
.body_background { background-color: #000000; }
.inv_foreground { color: #000000; }
.inv_background { background-color: #AAAAAA; }
.ansi1 { font-weight: bold; }
.ansi34 { color: #0000aa; }
</style>
</head>
<body class="body_foreground body_background" style="font-size: normal;" >
<pre class="ansi2html-content">
POM_XPATH_REPLACE(7)          Java Packages Tools         POM_XPATH_REPLACE(7)



<span class="ansi1">NAME</span>
       pom_xpath_replace - replace XML node from XML file with given code

<span class="ansi1">SYNOPSIS</span>
       <span class="ansi1">%pom_xpath_replace </span>XPath XML-code [XML-file-location]...

<span class="ansi1">OPTIONS</span>
       <span class="ansi1">-r</span>
           Work in recursive mode. That means that given node is also replaced
           in all enabled submodules of given POM file(s). Has no effect if
           the file is not Maven POM.

       <span class="ansi1">-f</span>
           Do not throw an error when one of the specified files doesn’t
           contain given node.

<span class="ansi1">DESCRIPTION</span>
       This macro patches specified POM file removing all XML nodes described
       by the XPath expression and injecting given XML code in their place.

       XPath is an expression describing a set of XML nodes to be removed from
       the POM file. It must be a properly formated XPath 1.0 expression, as
       described in <span class="ansi34"></span><span class="ansi1 ansi34">http://www.w3.org/TR/xpath/</span><span class="ansi1"></span>.

       Maven POM files use specific XML namespace
       http://maven.apache.org/POM/4.0.0 as default. This namespace needs to
       be explicitly specified in XPath expressions by prefixing all node
       names with <span class="ansi1">pom </span>(i.e. <span class="ansi1">pom:modelVersion</span>).

       Many other XML formats also use namespaces which you have to explicitly
       specify. This script will use the namespace prefix names from the <span class="ansi1">xmlns</span>
       declarations in the document’s root element. So if the document begins
       with &lt;root xmlns:my="myurl.com"&gt; you would select the root node with
       XPath expression <span class="ansi1">/my:root</span>. If the document specifies a default
       namespace (eg xmlns="myurl.com") use the prefix named <span class="ansi1">default </span>to acces
       elements in that namespace.

       XML location can be either a full path to the XML, or a path to the
       directory containing <span class="ansi1">pom.xml </span>or <span class="ansi1">ivy.xml</span>. If XML location is not given
       then <span class="ansi1">pom.xml </span>or <span class="ansi1">ivy.xml </span>from current working directory is used. When
       both <span class="ansi1">pom.xml </span>and <span class="ansi1">ivy.xml </span>are present, <span class="ansi1">pom.xml </span>is processed. You can
       specify more file locations.

<span class="ansi1">AUTHOR</span>
       Written by Mikolaj Izdebski.

<span class="ansi1">REPORTING BUGS</span>
       Bugs should be reported through Java Packages Tools issue tracker at
       Github: <span class="ansi34"></span><span class="ansi1 ansi34">https://github.com/fedora-java/javapackages/issues</span><span class="ansi1"></span>.

<span class="ansi1">SEE ALSO</span>
       <span class="ansi1">pom_add_dep</span>(7), <span class="ansi1">pom_add_parent</span>(7), <span class="ansi1">pom_add_plugin</span>(7),
       <span class="ansi1">pom_disable_module</span>(7), <span class="ansi1">pom_remove_dep</span>(7), <span class="ansi1">pom_remove_parent</span>(7),
       <span class="ansi1">pom_remove_plugin</span>(7), <span class="ansi1">pom_change_dep</span>(7), <span class="ansi1">pom_set_parent</span>(7),
       <span class="ansi1">pom_xpath_inject</span>(7), <span class="ansi1">pom_xpath_remove</span>(7), <span class="ansi1">pom_xpath_set</span>(7).



JAVAPACKAGES                      01/25/2023              POM_XPATH_REPLACE(7)

</pre>
</body>

</html>
</div>
<div class="sect2">
<h3 id="_pom_xpath_set">A.22. pom_xpath_set</h3>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title></title>
<style type="text/css">
.ansi2html-content { display: inline; white-space: pre-wrap; word-wrap: break-word; }
.body_foreground { color: #AAAAAA; }
.body_background { background-color: #000000; }
.inv_foreground { color: #000000; }
.inv_background { background-color: #AAAAAA; }
.ansi1 { font-weight: bold; }
.ansi34 { color: #0000aa; }
</style>
</head>
<body class="body_foreground body_background" style="font-size: normal;" >
<pre class="ansi2html-content">
POM_XPATH_SET(7)              Java Packages Tools             POM_XPATH_SET(7)



<span class="ansi1">NAME</span>
       pom_xpath_set - set contents of XML node from XML file

<span class="ansi1">SYNOPSIS</span>
       <span class="ansi1">%pom_xpath_set </span>XPath new-contents [XML-file-location]

<span class="ansi1">DESCRIPTION</span>
       This macro patches specified POM file replacing contents of all XML
       nodes described by the XPath expression with given new text content.
       This works on both elements and attributes.

       XPath is an expression describing a set of XML nodes to be removed from
       the POM file. It must be a properly formated XPath 1.0 expression, as
       described in <span class="ansi34"></span><span class="ansi1 ansi34">http://www.w3.org/TR/xpath/</span><span class="ansi1"></span>.

       Maven POM files use specific XML namespace
       http://maven.apache.org/POM/4.0.0 as default. This namespace needs to
       be explicitly specified in XPath expressions by prefixing all node
       names with <span class="ansi1">pom </span>(i.e. <span class="ansi1">pom:modelVersion</span>).

       Many other XML formats also use namespaces which you have to explicitly
       specify. This script will use the namespace prefix names from the <span class="ansi1">xmlns</span>
       declarations in the document’s root element. So if the document begins
       with &lt;root xmlns:my="myurl.com"&gt; you would select the root node with
       XPath expression <span class="ansi1">/my:root</span>. If the document specifies a default
       namespace (eg xmlns="myurl.com") use the prefix named <span class="ansi1">default </span>to acces
       elements in that namespace.

       XML location can be either a full path to the XML, or a path to the
       directory containing <span class="ansi1">pom.xml </span>or <span class="ansi1">ivy.xml</span>. If XML location is not given
       then <span class="ansi1">pom.xml </span>or <span class="ansi1">ivy.xml </span>from current working directory is used. When
       both <span class="ansi1">pom.xml </span>and <span class="ansi1">ivy.xml </span>are present, <span class="ansi1">pom.xml </span>is processed. You can
       specify more file locations.

<span class="ansi1">AUTHOR</span>
       Written by Mikolaj Izdebski.

<span class="ansi1">REPORTING BUGS</span>
       Bugs should be reported through Java Packages Tools issue tracker at
       Github: <span class="ansi34"></span><span class="ansi1 ansi34">https://github.com/fedora-java/javapackages/issues</span><span class="ansi1"></span>.

<span class="ansi1">SEE ALSO</span>
       <span class="ansi1">pom_add_dep</span>(7), <span class="ansi1">pom_add_parent</span>(7), <span class="ansi1">pom_add_plugin</span>(7),
       <span class="ansi1">pom_disable_module</span>(7), <span class="ansi1">pom_remove_dep</span>(7), <span class="ansi1">pom_remove_parent</span>(7),
       <span class="ansi1">pom_remove_plugin</span>(7), <span class="ansi1">pom_set_parent</span>(7), <span class="ansi1">pom_xpath_inject</span>(7),
       <span class="ansi1">pom_xpath_remove</span>(7), <span class="ansi1">pom_xpath_replace</span>(7).



JAVAPACKAGES                      01/25/2023                  POM_XPATH_SET(7)

</pre>
</body>

</html>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2024-01-03 09:41:55 +0100
</div>
</div>
</body>
</html>